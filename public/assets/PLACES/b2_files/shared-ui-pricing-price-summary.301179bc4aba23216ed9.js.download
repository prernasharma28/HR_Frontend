/*@license For license information please refer to shared-ui-pricing-price-summary.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[1487],{6506:function(e,n,t){t.d(n,{j:function(){return H}});var r=t(67294),i=t(25354),a=t(49740),l=t(98250),c=t(64418),s=t(51163),o=t(48961),u=t(38859),m=t(22535),d=t(95878),E=t(14490),f=t(46191),p=t(33909),g=t(8365),y=t(70459),b=t(73030);function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){_(e,n,t[n])}))}return e}function k(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);l=!0);}catch(s){c=!0,i=s}finally{try{l||null==t.return||t.return()}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function I(){var e=O(["\n  fragment EnrichedMessageFragment on LodgingEnrichedMessage {\n    __typename\n    value\n    state\n  }\n"]);return I=function(){return e},e}function P(){var e=O(["\n  fragment PriceMessageFragment on DisplayPrice {\n    __typename\n    role\n    price {\n      formatted\n      accessibilityLabel\n    }\n    disclaimer {\n      content\n      primaryUIButton {\n        accessibility\n        primary\n      }\n    }\n  }\n"]);return P=function(){return e},e}function x(){var e=O(["\n  fragment PriceSummaryFragment on PropertyPrice {\n    displayMessages {\n      lineItems {\n        ...PriceMessageFragment\n        ...EnrichedMessageFragment\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return x=function(){return e},e}var D={EVENT_NAME:"price_summary.presented",EVENT_TYPE:"Impression",EVENT_VERSION:"1.0.0"},w=(0,i.Ps)(I()),N={STRONG:"bold",EMPHASIS:"medium",POSITIVE:"regular"},A={POSITIVE:"positive"},L=function(e){var n=e.data,t=n.value,i=n.state,l=e.textAlign,c=e.legalNightlyExperimentVariant,m=void 0===c?0:c,d=e.isReassuranceStylingEnabled,E=e.priceSummaryUpdateExperimentVariant,f=void 0===E?0:E;return r.createElement(o.b,{margin:{blockstart:d?"half":"unset"}},r.createElement(a.i,{alignItems:"center"},r.createElement(r.Fragment,null,"POSITIVE"===i&&1===f&&r.createElement(o.b,{margin:{inlineend:"half"}},r.createElement(s.a,{name:"check",size:s.E.EXTRA_SMALL,theme:"positive"})),r.createElement("div",null,r.createElement(u.c,{size:2===m||d||"EMPHASIS"===i?300:200,weight:i?N[i]:"regular",theme:i?A[i]:void 0,align:l},t)))))};L.fragment=k(h({},w),{__typename:"LodgingEnrichedMessage"}),L.displayName="EnrichedMessage";var j=function(e){var n,t=e.disclaimer,i=e.textAlign,c=e.children,o=e.type,u=e.enableInlineLink,m=void 0!==u&&u,d=e.onDisclaimerClick,E=null!=t?t:{},v=E.content,_=void 0===v?"":v,h=E.primaryUIButton,k=r.useMemo((function(){return Math.random().toString(36).substr(2,5)}),[]),O="".concat(o,"-price-disclaimer-").concat(k),I=S((0,b.useDialog)(O,"pwaNestedDialog"),3),P=I[0],x=I[1],D=I[2],w=(0,l.Gv)(),N=r.useCallback((function(){x.openDialog()}),[x]),A=(0,r.useRef)(null);return r.createElement(r.Fragment,null,m?r.createElement(y.o5,{onClick:N,onClickCapture:function(){w(".Price.DisclaimerDialog","Price Disclaimer Dialog"),d&&d()},"data-stid":"disclaimer-dialog-link",inline:!0},r.createElement("button",{type:"button",ref:A},r.createElement(a.i,{direction:"left"===i?"row-reverse":"row"},r.createElement(a.j,null,c)))):r.createElement(p.E,{onClick:N,onClickCapture:function(){w(".Price.DisclaimerDialog","Price Disclaimer Dialog"),d&&d()},"data-stid":"disclaimer-dialog-link"},r.createElement("button",{type:"button",ref:A},r.createElement(a.i,{direction:"left"===i?"row-reverse":"row"},r.createElement(a.j,null,r.createElement(s.a,{name:"info_outline",size:s.E.SMALL})),r.createElement(a.j,null,c)))),r.createElement(g.h,{isVisible:P},r.createElement(D,null,r.createElement(f.a,{returnFocusOnClose:!0,dialogShow:P,triggerRef:A},r.createElement(f.b,null,_,r.createElement(f.c,{buttonOne:{onClick:x.closeDialog,text:null!==(n=null==h?void 0:h.primary)&&void 0!==n?n:"",type:"tertiary"}}))))))},C=(0,i.Ps)(P()),M=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel;return r.createElement(o.b,null,r.createElement("div",null,r.createElement(u.c,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(u.c,null,t))))},R=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel,a=e.isReassuranceStylingEnabled,l=(0,d.v)().context,s=9001001===(null==l?void 0:l.siteId),f=(0,E.N3)(),p=(0,E.RS)(f,s),g=(0,c.useExperiment)("California_Increase_size_of_lead_price",!1),y=g.exposure,b=g.logExperiment;a&&b(y);var v=S(r.useState(p),2),_=v[0],h=v[1];r.useEffect((function(){h(p)}),[p]);var k=r.createElement(r.Fragment,null,t);if(1===y.bucket&&a){var O,I=null===(O=t.match(/\$\d{1,3}(,\d{3})*(\.\d{2})?/g))||void 0===O?void 0:O[0];if(I){var P=t.split(I);(null==P?void 0:P.length)>0&&(k=r.createElement(u.c,null,P[0]," ",r.createElement("span",{className:"uitk-type-500"},I)," ",P[1]))}}return r.createElement(o.b,{padding:{blockstart:"half"}},r.createElement(m.d,{type:"relative"},r.createElement("div",{className:p?"fee-inclusive-coachmark":void 0},r.createElement(u.c,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(u.c,{size:a?400:500,weight:"medium",theme:"emphasis"},_&&r.createElement(E.lg,{onDismiss:function(){h(!1)}}),k)))))},T=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel,a=e.disclaimer,l=e.textAlign,s=e.enableInlineLink,m=void 0!==s&&s,d=e.onDisclaimerClick,E=e.isReassuranceStylingEnabled,f=(0,c.useExperiment)("EGDS_remove_info_icon_and_add_inline_link").exposure,p=(0,c.useExperiment)("GT_Carousel_on_Package_Checkout").exposure,g=m&&(0!==f.bucket||0!==p.bucket),y=r.createElement(o.b,{padding:{inlinestart:E?"unset":"half",inlineend:E?"unset":"half"}},r.createElement("div",null,r.createElement(u.c,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(u.c,{size:E?200:300},r.createElement("del",null,t)))));return a?r.createElement(j,{disclaimer:a,textAlign:l,type:"STRIKEOUT",enableInlineLink:g,onDisclaimerClick:d},y):y},V=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel,a=e.disclaimer,l=e.enableInlineLink,s=void 0!==l&&l,m=e.isReassuranceStylingEnabled,d=0!==(0,c.useExperiment)("How_travellers_understand_price_summary_visual_and_content_hierarchy").exposure.bucket,E=r.createElement(o.b,{margin:{inline:"half",blockstart:m?"half":"unset"}},r.createElement("div",null,r.createElement(u.c,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(u.c,{weight:d?"medium":"regular",size:d||m?300:200},t))));return a?r.createElement(j,{disclaimer:a,textAlign:"left",type:"INFORMATIVE",enableInlineLink:s},E):E},F=function(e){var n=e.data,t=e.textAlign,i=e.enableInlineLink,a=void 0!==i&&i,l=e.isReassuranceStylingEnabled,c=e.onDisclaimerClick;switch(n.role){case"LEAD":return r.createElement(R,k(h({},n),{isReassuranceStylingEnabled:l}));case"STRIKEOUT":return r.createElement(T,k(h({},n),{textAlign:t,enableInlineLink:a,onDisclaimerClick:c,isReassuranceStylingEnabled:l}));case"INFORMATIVE":return r.createElement(V,k(h({},n),{enableInlineLink:a,isReassuranceStylingEnabled:l}));default:return r.createElement(M,h({},n))}};F.fragment=k(h({},C),{__typename:"DisplayPrice"}),F.displayName="PriceMessage",T.displayName="StrikeOutPrice",R.displayName="LeadPrice",M.displayName="FallbackPrice";var z=(0,i.Ps)(x(),F.fragment,L.fragment),U=[F,L],G=function(e){var n,t=e.flexAlignment,i=e.flexDirection,l=void 0===i?"row":i,s=e.index,o=e.displayMessage,u=e.enableInlineLink,m=void 0!==u&&u,d=e.isReassuranceStylingEnabled,E=e.onDisclaimerClick,f=(0,c.useExperiment)("legal_test_nightly_POSa_total_lead_price_").exposure,p=(0,c.useExperiment)("California_Vrbo_Price_Summary_update").exposure;return r.createElement(a.i,{space:"one",justifyContent:"row-reverse"===l?"end":t,direction:l,alignItems:"end",wrap:"wrap",dataTestId:"price-summary-message-line"},null==o||null===(n=o.lineItems)||void 0===n?void 0:n.map((function(e,n){var i=(e||{}).__typename,a=U.find((function(e){return e.fragment.__typename===i}));return a?r.createElement(a,{key:"attr-".concat(s,"-").concat(n),data:e,textAlign:"end"===t?"right":"left",enableInlineLink:m,legalNightlyExperimentVariant:f.bucket,priceSummaryUpdateExperimentVariant:p.bucket,onDisclaimerClick:E,isReassuranceStylingEnabled:d}):null})))},H=function(e){var n,t=e.data,i=e.flexAlignment,c=void 0===i?"end":i,s=e.enableInlineLink,o=void 0!==s&&s,u=e.messageLineFlexDirection,m=e.isReassuranceStylingEnabled,d=e.onDisclaimerClick,E=t.displayMessages,f={event:{event_type:(n=D).EVENT_TYPE,event_name:n.EVENT_NAME,event_version:n.EVENT_VERSION}};return(null==E?void 0:E.length)?r.createElement(a.i,{direction:"column",dataTestId:"price-summary"},r.createElement(l.Ff,{eventData:f},E.map((function(e,n){return r.createElement(G,{key:"attr-".concat(n),index:n,flexAlignment:c,flexDirection:u,displayMessage:e,enableInlineLink:o,onDisclaimerClick:d,isReassuranceStylingEnabled:m})})))):null};H.fragment=z,H.displayName="sharedui-PriceSummary",G.displayName="sharedui-MessageLine"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/blossom-flex-ui/shared-ui-pricing-price-summary.301179bc4aba23216ed9.js.map