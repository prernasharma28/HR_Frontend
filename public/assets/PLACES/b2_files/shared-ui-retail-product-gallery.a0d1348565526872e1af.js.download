/*@license For license information please refer to shared-ui-retail-product-gallery.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[3701],{95358:function(e,n,t){t.d(n,{Li:function(){return fn},Vp:function(){return Ce},q6:function(){return Se}});var l=t(67294),a=t(25354),i=t(92787),r=t(95878),o=t(98250),c=t(79025),u=t(64418),m=t(57099),d=t(20501),s=t(92399),g=t(8365),v=t(48961),p=t(52772),f=t(73030),E=t(85395),y=t(4664),b=t(19633),h=t(86820),I=t(93669),k=t(51163),C=t(49740),S=t(22535),x=t(49586),T=t(72839),D=t(10033),_=t(29892),P=t(94469),w=t(38859),A=t(16658),L=t(85804),O=t(29524),G=t(18198),M=t(43200),R=t(88092),N=t(21155),V=t(69869),F=t(70131),B=t(64248),j=t(8409),U=t(21629),z=t(47126),H=t(79371),Y=t(97041),Q=t(93203);function K(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function W(e,n,t,l,a,i,r){try{var o=e[i](r),c=o.value}catch(u){return void t(u)}o.done?n(c):Promise.resolve(c).then(l,a)}function $(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){$(e,n,t[n])}))}return e}function q(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function Z(e,n){if(null==e)return{};var t,l,a=function(e,n){if(null==e)return{};var t,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function J(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,a,i=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==t.return||t.return()}finally{if(o)throw a}}return i}}(e,n)||te(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function ne(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){if(e){if("string"==typeof e)return K(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(e,n):void 0}}function le(e,n){var t,l,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,l&&(a=2&i[0]?l.return:i[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,i[1])).done)return a;switch(l=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,l=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=n.call(e,r)}catch(o){i=[6,o],l=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function ae(){var e=ee(["\n  fragment GalleryButtonsFragment on ProductImageGallery {\n    galleryButtons {\n      accessibility\n      icon {\n        description\n        id\n      }\n      action {\n        resource {\n          value\n        }\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function ie(){var e=ee(["\n  fragment PropertyImageFragment on ProductImageInfo {\n    image {\n      url\n      description\n      analytics {\n        linkName\n        referrerId\n      }\n    }\n    lowResImage {\n      url\n    }\n    analytics {\n      trackingId\n      imageId\n      subjectId\n    }\n    description\n  }\n"]);return ie=function(){return e},e}function re(){var e=ee(["\n  fragment CarouselContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categoryIdAll\n    categorizedImages {\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return re=function(){return e},e}function oe(){var e=ee(["\n  fragment MosaicContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categorizedImages {\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return oe=function(){return e},e}function ce(){var e=ee(["\n  fragment SimilarImagesFallbackFragment on DialogView {\n    primary\n    secondary\n    analytics {\n      linkName\n      referrerId\n    }\n    closeButton {\n      primary\n      accessibility\n    }\n    icon {\n      token\n      description\n      id\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=ee(["\n  fragment SimilarImagesDialogFragment on SimilarImageDialog {\n    primary\n    toolbar {\n      title\n      icon {\n        token\n        description\n        id\n      }\n      secondaryIcon {\n        id\n        token\n        description\n      }\n    }\n    trigger {\n      accessibilityLabel\n      clientSideAnalytics {\n        referrerId\n        linkName\n      }\n      dialogName\n      value\n      icon {\n        id\n        description\n        token\n      }\n    }\n    fallback {\n      ...SimilarImagesFallbackFragment\n    }\n  }\n  ","\n"]);return ue=function(){return e},e}function me(){var e=ee(["\n  fragment MediaGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    mediaGalleryDialog {\n      toolbar {\n        icon {\n          id\n          description\n        }\n      }\n      similarImageDialog {\n        ...SimilarImagesDialogFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return me=function(){return e},e}function de(){var e=ee(["\n  fragment ThumbnailGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    thumbnailGalleryDialog {\n      toolbar {\n        title\n        icon {\n          id\n          description\n        }\n      }\n      trigger {\n        accessibilityLabel\n        value\n      }\n      primaryButton {\n        button {\n          ... on UIPrimaryButton {\n            primary\n            accessibility\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n        targetRef\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}function se(){var e=ee(["\n  fragment ProductGalleryImageContainerFragment on ProductImageGallery {\n    ...MosaicContainerFragment\n    ...CarouselContainerFragment\n    ...MediaGalleryDialogFragment\n    ...ThumbnailGalleryDialogFragment\n    ...GalleryButtonsFragment\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return se=function(){return e},e}function ge(){var e=ee(["\n  query ProductGalleryQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productGallery(context: $context, productIdentifier: $productIdentifier) {\n      ...ProductGalleryImageContainerFragment\n    }\n  }\n\n  ","\n"]);return ge=function(){return e},e}var ve=(0,l.createContext)({isRandomAccessOne:!1,data:void 0,multiModuleUgcContentData:void 0}),pe=function(e){var n=e.data,t=e.children,a=e.multiModuleUgcContentData,i=(e.isRandomAccessOne,(0,l.useMemo)((function(){var e,t;return{isRandomAccessOne:!!(null==n||null===(t=n.randomAccessOne)||void 0===t||null===(e=t.mapping)||void 0===e?void 0:e.length),data:n,multiModuleUgcContentData:a}}),[n,a]));return l.createElement(ve.Provider,{value:i},t)};function fe(){var e=(0,y.TH)();return(0,l.useMemo)((function(){return new URLSearchParams(e.search)}),[e.search])}var Ee={VIDEO_SUCCESS:new E.SystemEvent(E.SystemEventLevel.INFO,"VIDEO_SUCCESS"),VIDEO_FAILED:new E.SystemEvent(E.SystemEventLevel.ERROR,"VIDEO_FAILED")},ye="Successful lookupVideo call for aerial view, propertyId=",be="lookupVideo call failed for aerial view, propertyId=",he=function(e,n){return{event:{event_name:e,event_type:n,event_version:"1.0.0",event_category:""},experience:{app_name:"shared-ui",app_version:"1.0.0",page_name:"PDP Page"}}};function Ie(e){var n,t,l,a,i,r,o,c,u;return{src:null!==(a=e.image.url)&&void 0!==a?a:"",caption:null!==(r=null!==(i=e.description)&&void 0!==i?i:e.image.description)&&void 0!==r?r:"",displayCaption:null!==(o=e.image.description)&&void 0!==o?o:"",alt:null!==(u=null!==(c=e.description)&&void 0!==c?c:e.image.description)&&void 0!==u?u:"",thumbnailClickAnalytics:null===(n=e.image)||void 0===n?void 0:n.analytics,trackingId:(null===(t=e.analytics)||void 0===t?void 0:t.trackingId)||null,imageId:(null===(l=e.analytics)||void 0===l?void 0:l.imageId)||null}}function ke(e){return e.map(Ie)}var Ce=(0,l.createContext)({useControlGalleryAdaptexCampaign:!1,setAdaptExState:function(){},eventType:void 0,setAdaptExSuccessEvent:function(){},data:void 0,setGalleryData:function(){}}),Se=function(e){var n=e.children,t=J((0,l.useState)(!1),2),a=t[0],i=t[1],r=J((0,l.useState)(void 0),2),o=r[0],c=r[1],u=J((0,l.useState)(void 0),2),m=u[0],d=u[1],s=(0,l.useMemo)((function(){return{useControlGalleryAdaptexCampaign:a,setAdaptExState:i,eventType:o,setAdaptExSuccessEvent:c,data:m,setGalleryData:d}}),[a,i,o,c,m,d]);return l.createElement(Ce.Provider,{value:s},n)};function xe(e,n,t,l,a,i,r){var o=[{imageGalleryMetaTagValue:Date.now().toString(),imageGalleryMetaTagType:"DEVICE_TIME_STAMP"}];return r&&o.push({imageGalleryMetaTagValue:r,imageGalleryMetaTagType:"GALLERY_FILTER"}),[{schemaName:"allHotelProducts",messageContent:{hotelProducts:[X({imageGalleryAlgorithm:{name:"heroaesthetics.v20190411-hsc.v20190223"},algoMediaGuid:n},a?{productId:Number(a)}:{})]}},{schemaName:"imageTracking",messageContent:X({galleryName:i,galleryType:"GALLERY_TYPE_SINGLE",galleryMaxPosition:t,galleryPosition:e,repeatedGalleryIndex:null,imageGalleryMetaTagList:o},l?{images:[{id:l,galleryPosition:e}]}:{})}]}var Te=function(e){var n=e.children;return e.aerialViewButton?l.createElement(o.Ff,{eventData:he("aerial_view.presented","Impression")},n):n},De=(0,a.Ps)(ae()),_e={position:{zindex:"layer2",bottom:"three",right:"three"},type:"absolute"},Pe=function(e){var n=e.data,t=e.onThumbnailGalleryClick,a=e.onVirtualTourClick,i=e.onAerialViewClick,r=e.thumbnailButtonText,c=e.thumbnailDialogTriggerAccessibilityLabel,u=e.propertyId,m=n.galleryButtons,d=(0,o.Gv)(),s=(0,o.m_)(),g=l.useCallback((function(e){var n,t,l,r,o,c,u,d;if("tour_360"===(null==m||null===(t=m[e])||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.id)&&(null===(r=m[e])||void 0===r||null===(l=r.action)||void 0===l?void 0:l.resource)){var g,v,p,f=(null==m||null===(p=m[e])||void 0===p||null===(v=p.action)||void 0===v||null===(g=v.resource)||void 0===g?void 0:g.value)||"";a(f)}else if("visibility"===(null==m||null===(c=m[e])||void 0===c||null===(o=c.icon)||void 0===o?void 0:o.id)&&(null===(d=m[e])||void 0===d||null===(u=d.action)||void 0===u?void 0:u.resource)){var E,y,b,h=(null==m||null===(b=m[e])||void 0===b||null===(y=b.action)||void 0===y||null===(E=y.resource)||void 0===E?void 0:E.value)||"";s(he("aerial_view.selected","Interaction")),i(h.replace("#",""))}}),[m,s,a,i]),v=l.useMemo((function(){return{id:"HOT.HIS.PhotoGalleryTrigger",description:"Open Room Gallery dialog",callback:function(e,n){d(e,n,void 0,xe(0,void 0,0,void 0,u,"PDP_FULL_IMAGE_GALLERY"))}}}),[d]);return l.createElement(S.d,X({},_e),l.createElement(C.i,{space:"two",wrap:"nowrap"},null==m?void 0:m.map((function(e,n){var t,a,i,r;return l.createElement(Te,{aerialViewButton:"visibility"===(null==e||null===(t=e.icon)||void 0===t?void 0:t.id)&&(null==e||null===(a=e.action)||void 0===a?void 0:a.resource)},l.createElement(I.E,{key:"gallery-mosaic-action-".concat(null===(i=e.icon)||void 0===i?void 0:i.id),"aria-label":e.accessibility||"",role:"link",onClick:function(){return g(n)}},l.createElement(k.a,{name:(null===(r=e.icon)||void 0===r?void 0:r.id)||"",id:"gallery-mosaic-action-trigger"}),e.accessibility))})),l.createElement(I.E,{"aria-label":c||"",onClick:t,analytics:v},l.createElement(k.a,{name:"photo_library",id:"gallery-mosaic-thumbnail-trigger"}),r)))};Pe.displayName="GalleryButtons",Pe.fragment=De;var we=function(e){var n,t,a=e.button,i=e.onClick,r=e.showTextLabel;return l.createElement(I.E,{"aria-label":(null==a?void 0:a.accessibility)||"",size:x.E.SMALL,onClick:i},l.createElement(k.a,{size:k.E.SMALL,name:(null==a||null===(n=a.icon)||void 0===n?void 0:n.id)||"",id:"PhotoGallery-".concat(null==a||null===(t=a.icon)||void 0===t?void 0:t.id)}),!r&&(null==a?void 0:a.accessibility))},Ae=function(e){var n,t,a=e.button,i=e.onClick,r=e.showTextLabel;return l.createElement(I.E,{"aria-label":(null==a?void 0:a.accessibility)||"",size:x.E.SMALL,onClick:i},l.createElement(k.a,{size:k.E.SMALL,name:(null==a||null===(n=a.icon)||void 0===n?void 0:n.id)||"",id:"PhotoGallery-".concat(null==a||null===(t=a.icon)||void 0===t?void 0:t.id)}),!r&&(null==a?void 0:a.accessibility))},Le=function(e){var n=e.uitkImages,t=e.handleMediaButtonClick,a=(0,_.useLocalization)().formatText;return l.createElement(I.E,{size:x.E.SMALL,onClick:t},l.createElement(k.a,{name:"photo_library",id:"photo_library-id",title:a("gallerycarousel.mediaGalleryButton",n.length)}),l.createElement("span",{"aria-hidden":"true"},String(n.length)))},Oe=function(e){var n,t,a=e.ratio,i=e.uitkImages,o=e.controlAnalytics,c=e.label,u=e.handleIndexChange,m=e.handleImageClick,d=e.handleMediaButtonClick,s=e.onVirtualTourClick,g=e.onAerialViewClick,v=e.virtualTourButton,p=e.aerialViewButton,f=l.useRef(null),E=J(l.useState(0),2),y=E[0],b=E[1],I="MOBILE_PHONE"===(0,r.v)().context.device.type;return l.createElement(S.d,{type:"relative"},l.createElement(T.E,{carouselRef:f,analytics:o,carouselHeaderLevel:"h2",carouselHeaderText:c||"",carouselName:"PhotoGallery",itemsVisible:{sm:1,md:1,lg:1},onIndexChange:function(e){b(e),u(e)},hideNav:I,pagingPersistent:!I,pagingInset:!I,pagingOverlay:!I,peek:!1,wrapItems:!0,buttonText:{nextButton:"Show next card",prevButton:"Show previous card"}},i.map((function(e,n){return l.createElement(h.a,{ratio:a,key:n},l.createElement(h.b,{placeholderImage:!0,alt:e.alt,src:e.src,lazyLoading:"lazy"}),l.createElement(h.c,null,l.createElement("button",{type:"button",onClick:m},e.alt)))}))),(null===(n=f.current)||void 0===n?void 0:n.changeIndex)&&I&&l.createElement(D.E,{type:D.a.BOTTOM},l.createElement(T.f,{activeIndex:y,inset:!0,itemCount:i.length,changeIndex:null===(t=f.current)||void 0===t?void 0:t.changeIndex})),I?l.createElement(l.Fragment,null,l.createElement(S.d,{position:{bottom:"three",left:"three",zindex:"layer3"},type:"absolute"},v&&l.createElement(we,{button:v,onClick:s,showTextLabel:I}),p&&l.createElement(we,{button:p,onClick:g,showTextLabel:I})),l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},l.createElement(Le,{uitkImages:i,handleMediaButtonClick:d}))):l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},l.createElement(C.i,{space:"two"},l.createElement(C.j,null,v&&l.createElement(Ae,{button:v,onClick:s,showTextLabel:I}),p&&l.createElement(we,{button:p,onClick:g,showTextLabel:I})),l.createElement(C.j,null,l.createElement(Le,{uitkImages:i,handleMediaButtonClick:d})))))},Ge=function(e){var n,t,a,i,r=e.imageIndex,c=e.images,u=e.propertyId,m=e.children;return l.createElement(o.Pt,{tag:"span",referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(r),linkName:"Mosaic Tile Image Impression",trackOnce:!0,additionalUisPrimeMicroMessages:xe(r,null===(t=c[r])||void 0===t||null===(n=t.analytics)||void 0===n?void 0:n.trackingId,c.length,null===(i=c[r])||void 0===i||null===(a=i.analytics)||void 0===a?void 0:a.imageId,u,"PDP_MOSAIC")},m)},Me=(0,a.Ps)(ie()),Re=function(e){var n=e.data,t=e.onClick,a=e.index,i=e.className,r=e.fetchPriority,c=e.galleryLength,m=e.propertyId,d=Z(e,["data","onClick","index","className","fetchPriority","galleryLength","propertyId"]),s=n.image,g=n.lowResImage,v=n.analytics,p=n.description,f=v||{},E=f.trackingId,y=f.imageId,b=null==s?void 0:s.analytics,I=(0,o.Gv)(),k=(0,u.useExperiment)("Larger_image_mosaic_on_top_of_pdp",!0).exposure.bucket,C=l.useCallback((function(){b&&I(null==b?void 0:b.referrerId,null==b?void 0:b.linkName),t(a)}),[t,a,b]),S=l.createElement(l.Fragment,null,l.createElement(h.b,{alt:null!=p?p:"",placeholderImage:!0,src:(null==g?void 0:g.url)?g.url:s.url,additionalProps:{fetchPriority:r}}),l.createElement(h.c,null,l.createElement("button",{onClick:C,type:"button"},l.createElement("span",{className:"is-visually-hidden"},p))));return l.createElement(h.a,q(X({},d),{className:i,ratio:2===k?h.E.R3_2:h.E.R16_9}),v?l.createElement(o.Pt,{trackOnce:!0,referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(a),linkName:"Mosaic Tile Image Impression",additionalUisPrimeMicroMessages:xe(a,E,c,y,m,"PDP_MOSAIC")},S):S)};Re.displayName="PropertyImage",Re.fragment=Me;var Ne=(0,a.Ps)(re(),Pe.fragment,Re.fragment),Ve=function(e){var n=e.data,t=e.allImages,a=e.onImageClick,i=e.onVirtualTourClick,c=e.onAerialViewClick,u=e.onTriggerClick,m=e.imageIndexState,d=e.propertyId,s=n.galleryButtons,g=n.accessibilityLabel,v=l.useContext(Ce),p=v.setAdaptExSuccessEvent,f=v.useControlGalleryAdaptexCampaign,E=(0,o.Gv)(),y=(0,o.m_)(),b=J(m,2),I=b[0],k=b[1],C="MOBILE_PHONE"===(0,r.v)().context.device.type;(0,l.useEffect)((function(){f&&p("ADAPTEX_MOSAIC_VIEW_ATTEMPT_EVENT")}),[]);var S=l.useMemo((function(){return{id:"HOT.HIS.Main",description:"Change image in gallery carousel",callback:function(e,n){var l,a,i,r,o=(a=I,i=t.length,(r=e).includes("clickRight")?a<i-1?a+1:0:r.includes("clickLeft")?a>0?a-1:i-1:a),c=(null===(l=t[o])||void 0===l?void 0:l.analytics)||{},u=c.trackingId,m=c.imageId;E(e,n,void 0,xe(o,u,t.length,m,d,"PDP_MOSAIC"))}}}),[E]),x=l.useCallback((function(e){k(e)}),[k]),T=l.useCallback((function(){var e,n,l,i=t[I],r=null==i||null===(e=i.image)||void 0===e?void 0:e.analytics;r&&E(null==r?void 0:r.referrerId,null==r?void 0:r.linkName),E("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,xe(I,null==i||null===(n=i.analytics)||void 0===n?void 0:n.trackingId,t.length,null==i||null===(l=i.analytics)||void 0===l?void 0:l.imageId,d,"PDP_MOSAIC")),a()}),[E,a]),D=l.useCallback((function(){E("HOT.HIS.PhotoGalleryTrigger","Open Room Gallery dialog"),u()}),[E,u]),_=null==s?void 0:s.find((function(e){var n,t,l;return"tour_360"===(null===(n=e.icon)||void 0===n?void 0:n.id)?null===(l=e.action)||void 0===l||null===(t=l.resource)||void 0===t?void 0:t.value:null})),P=null==s?void 0:s.find((function(e){var n,t,l;return"visibility"===(null===(n=e.icon)||void 0===n?void 0:n.id)?null===(l=e.action)||void 0===l||null===(t=l.resource)||void 0===t?void 0:t.value:null})),w=l.useCallback((function(){(null==_?void 0:_.action)&&i(_.action.resource.value)}),[i,_]),A=l.useCallback((function(){if(null==P?void 0:P.action){var e,n,t=(null===(n=P.action)||void 0===n||null===(e=n.resource)||void 0===e?void 0:e.value)||"";y(he("aerial_view.selected","Interaction")),c(t.replace("#",""))}}),[y,c,P]),L=l.useMemo((function(){return t.map((function(e){var n,t,l,a,i;return{src:null!==(t=e.image.url)&&void 0!==t?t:"",caption:null!==(l=null===(n=e.image)||void 0===n?void 0:n.description)&&void 0!==l?l:"",alt:null!==(i=null!==(a=e.description)&&void 0!==a?a:e.image.description)&&void 0!==i?i:""}}))}),[t]),O=C?h.E.R3_2:h.E.R16_9;return l.createElement(Te,{aerialViewButton:P},l.createElement(Ge,{propertyId:d,images:t,imageIndex:I},l.createElement(Oe,{ratio:O,uitkImages:L,controlAnalytics:S,label:g,handleIndexChange:x,handleImageClick:T,handleMediaButtonClick:D,onVirtualTourClick:w,onAerialViewClick:A,virtualTourButton:_,aerialViewButton:P})))};Ve.displayName="CarouselContainer",Ve.fragment=Ne;var Fe=(0,a.Ps)(oe(),Pe.fragment,Re.fragment);var Be=function(e){var n,t=e.data,a=e.allImages,i=e.imagesToShow,r=e.onImageClick,c=e.propertyId,u=t.accessibilityLabel,m=l.useContext(Ce),d=m.setAdaptExSuccessEvent,s=m.useControlGalleryAdaptexCampaign,g=(0,o.Gv)();(0,l.useEffect)((function(){s&&d("ADAPTEX_MOSAIC_VIEW_ATTEMPT_EVENT")}),[]);var v=l.useMemo((function(){var e=a.slice(0,i);return e.length%2==0&&e.pop(),e}),[a,i]),p=l.useCallback((function(e){var n,t=(null===(n=v[e])||void 0===n?void 0:n.analytics)||{},l=t.trackingId,a=t.imageId;g("HOT.HIS.ClickMosaicTileImage.".concat(e),"Property mosaic tile image click",void 0,xe(e,l,v.length,a,c,"PDP_MOSAIC")),g("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,xe(e,l,v.length,a,c,"PDP_MOSAIC")),r(e)}),[g,r]),f=function(e){switch(e){case 5:return 4;case 3:return 3;default:return 1}}(v.length);return l.createElement(S.d,{type:"relative"},l.createElement(P.E,{columns:f,rows:2,space:"half"},l.createElement("meta",{itemProp:"image",content:null===(n=v[0])||void 0===n?void 0:n.image.url}),l.createElement("h2",{className:"is-visually-hidden"},u),v.map((function(e,n){return l.createElement(P.a,{key:"mosaic-image-".concat(n),colSpan:0===n?2:1,rowSpan:0===n?2:1},l.createElement(Re,{data:e,onClick:p,index:n,fetchPriority:0===n?"high":void 0,galleryLength:i,propertyId:c}))}))))};Be.fragment=Fe,Be.displayName="MosaicContainer";var je=function(e){var n=e.isDialogOpen,t=e.onDialogDismiss,a=e.triggerRef,i=e.aerialViewLandscape,r=e.aerialViewDescription,c=(0,o.Gv)(),u=(0,o.m_)(),m=l.useMemo((function(){return{id:"HOT.HIS.AerialViewTrigger",description:"Close aerial view dialog",callback:function(e,n){c(e,n),u(he("aerial_view.closed","Interaction"))}}}),[c,u]);return l.createElement(g.e,{isVisible:n,liveAnnounceString:"Full Sheet has opened",type:"full",triggerRef:a,theme:"dark"},l.createElement(A.d,{overlay:!0,navigationContent:{navButtonId:"UitkMediaGalleryImageToolbar",navType:"close",navIconLabel:"Close",onClick:t,onClickAnalytics:m}}),i.length>0&&l.createElement(g.f,{padded:!1},l.createElement(C.i,{justifyContent:"center",alignItems:"center",blockSize:"full_size",direction:"column"},l.createElement(C.j,{alignSelf:"center"},l.createElement(L.Y7,{src:i,autoPlay:!0,muted:!0,controlsList:"nodownload"})),l.createElement(b.l_,null,l.createElement(b.Vk,null,l.createElement(C.j,{alignSelf:"start"},l.createElement(v.b,{margin:"three"},l.createElement(w.c,{theme:"inverse",overflow:"wrap"},r)))),l.createElement(b.N2,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(C.i,{justifyContent:"space-between",alignItems:"end"},l.createElement(D.E,{type:D.a.BOTTOM},l.createElement(w.c,{theme:"inverse",overflow:"wrap"},r))))))))))};je.displayName="AerialViewDialog";var Ue=function(e){var n,t=e.onSimilarImagesDialogOpen,a=e.selectedImage,i=e.similarImagesButton,r=1===(0,u.useExperiment)("Similar_images",!1).exposure.bucket,c=(0,o.Gv)();if(!r||!i)return null;return l.createElement(G.E,{"aria-label":i.accessibilityLabel||"",inverse:!0,onClick:function(){if(a){var e=(null==i?void 0:i.clientSideAnalytics)||{},n=e.referrerId,l=e.linkName;n&&l&&c(n,l),t(a)}}},i.value,l.createElement(k.a,{name:(null===(n=i.icon)||void 0===n?void 0:n.id)||""}))},ze=function(e){var n,t,a,i,r=e.onSimilarImagesDialogOpen,c=e.selectedImage,u=e.similarImagesButton,m=e.shouldShowAnimatedButton,d=(0,o.Gv)(),s=(0,b.uQ)(($(i={},b.Cu.SMALL,!0),$(i,b.Cu.MEDIUM,!1),i));if(!u)return null;var g={size:x.E.SMALL,onClick:function(){if(c){var e=(null==u?void 0:u.clientSideAnalytics)||{},n=e.referrerId,t=e.linkName;n&&t&&d(n,t),r(c)}}},v=l.createElement(I.E,q(X({},g),{"aria-label":u.accessibilityLabel||""}),l.createElement(k.a,{name:(null===(n=u.icon)||void 0===n?void 0:n.id)||""})),p=l.createElement(I.E,q(X({},g),{"aria-label":u.accessibilityLabel||""}),u.value,l.createElement(k.a,{name:(null===(t=u.icon)||void 0===t?void 0:t.id)||""})),f=s?v:p,E=l.createElement(L.ZN,X({ariaLabel:u.accessibilityLabel||"",text:u.value||"",icon:(null===(a=u.icon)||void 0===a?void 0:a.id)||""},g));return m&&s?E:f},He="lodging_dated_pdp:similar_images",Ye=l.createContext({updatedSearchCriteria:void 0,setUpdatedSearchCriteria:function(){}}),Qe=(0,a.Ps)(ce()),Ke=function(e){var n,t,a,i,r=e.data,c=e.closeDialog,u=(0,b.uQ)(($(i={},b.Cu.SMALL,!0),$(i,b.Cu.MEDIUM,!1),i));if(!r)return null;var m=r.analytics||{},d=m.referrerId,s=m.linkName,p=l.createElement(C.i,{justifyContent:"center",alignItems:"center",direction:"column",blockSize:"full_size"},l.createElement(C.j,null,l.createElement(v.b,{margin:{blockend:"four"}},l.createElement(C.i,{justifyContent:"center",alignItems:"center"},l.createElement(C.j,null,l.createElement(k.a,{name:(null==r||null===(n=r.icon)||void 0===n?void 0:n.id)||"",size:k.E.LARGE})),l.createElement(C.j,null,l.createElement(v.b,{margin:{inlinestart:"three"}},l.createElement(w.E,{tag:"h2",size:u?4:2},null==r?void 0:r.primary)))))),l.createElement(C.j,null,l.createElement(w.c,{size:u?400:500,align:"center"},null==r?void 0:r.secondary)),l.createElement(C.j,null,l.createElement(v.b,{margin:{blockstart:"six"}},l.createElement(R.E,{type:"button",onClick:c,"aria-label":(null==r||null===(t=r.closeButton)||void 0===t?void 0:t.accessibility)||"",size:x.E.MEDIUM},null==r||null===(a=r.closeButton)||void 0===a?void 0:a.primary))));return l.createElement(g.f,{padded:!1},d&&s?l.createElement(o.Pt,{referrerId:d,linkName:s,cloneElement:!0,refAttrForCloneElement:"domRef"},p):p)};Ke.displayName="SimilarImagesFallbackView",Ke.fragment=Qe;var We=function(){var e,n=(0,b.uQ)(($(e={},b.Cu.SMALL,!0),$(e,b.Cu.MEDIUM,!1),e));return l.createElement("div",null,ne(Array(n?2:5)).map((function(e,t){return l.createElement(v.b,{key:t,margin:{blockend:"four"}},l.createElement(N.i,null,l.createElement(P.E,{rows:[n?"40x":"200px"],columns:n?1:2},l.createElement(P.a,{colStart:n?"all":1},l.createElement(v.b,{margin:{small:{blockend:"four"},medium:{blockend:"six"}}},l.createElement(h.a,{imageFit:"cover"},l.createElement(V.a,null)))),l.createElement(P.a,{colStart:n?"all":2},l.createElement(N.m,{padded:!0},l.createElement(V.b,{animation:!0,type:"primary"}),l.createElement(v.b,{margin:{small:{blockstart:"three",blockend:"six"},medium:{blockstart:"three",blockend:"twelve"}}},l.createElement(V.b,{animation:!0,type:"secondary"})))))))})))},$e=(0,a.Ps)(ue(),Ke.fragment),Xe=new Map([["expand_less","expand_up"],["close","close"]]),qe=function(e){var n=e.isDialogOpen,t=e.triggerRef,a=e.toolbarComponent,i=e.sheetContent;return l.createElement(L.A0,{returnFocusOnClose:!0,isVisible:n,triggerRef:t,centeredSheetSize:"xxxlarge",height:1200},a,i)},Ze=function(e){var n,t,a,i,r=e.data,o=e.onDialogDismiss,c=e.selectedSimilarImage,u=e.triggerRef,m=e.travelSearchCriteria,d=e.propertyId,s=J((0,f.useDialog)("property-similar-image","pwaSimilarImageDialog"),1)[0],p=r.toolbar,E=r.primary,I=r.fallback,k=(0,b.uQ)(($(t={},b.Cu.SMALL,!0),$(t,b.Cu.MEDIUM,!1),t)),x=(0,M.ec)(),T=x.recommendationModulesStatus,D=x.setRecommendationModulesStatus,_=l.useContext(Ye).updatedSearchCriteria,L=J(l.useState("bottom"),2),O=L[0],G=L[1],R=fe(),N=(a=(0,y.s0)(),i=(0,y.TH)(),(0,l.useCallback)((function(e,n){var t=new URLSearchParams(i.search);t.set(e,n),a("".concat(i.pathname,"?").concat(t),{replace:!0})}),[i,a]));if((0,l.useEffect)((function(){c.imageId&&(R.get("similarImageId")===c.imageId&&G("full"),N("similarImageId",c.imageId));return function(){D((function(e){return e.filter((function(e){return e.id!==He}))}))}}),[]),!r||!c)return null;var V,F,B=k&&"bottom"===O,j=null===(n=T.find((function(e){return e.id===He})))||void 0===n?void 0:n.status,U=j===M.Ub.ERROR||j===M.Ub.EMPTY,z=window.innerHeight/2,H=function(e,n,t){var l,a,i,r,o=null==n?void 0:n.imageId,c=null==e||null===(l=e.property)||void 0===l?void 0:l.primary,u=null==e||null===(i=e.property)||void 0===i||null===(a=i.primary)||void 0===a?void 0:a.dateRange,m=null==e||null===(r=e.property)||void 0===r?void 0:r.secondary,d=null==u?void 0:u.checkInDate,s=null==u?void 0:u.checkOutDate,g=null==c?void 0:c.rooms.map((function(e){var n;return q(X({},e),{adults:e.adults,children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){return e.age}))})}));return{contentSize:M._3.LONG_FORM_FEATURED,offeringType:M.Pm.PRODUCT,strategy:M.r2.SIMILAR,containerType:M.lj.LIST,priceStrategy:M.js.LIVE,input:[M.to.DISPLAYED_IMAGE],recommendationContext:{displayedImageId:o,outputLineOfBusiness:M.Ko.LODGING,pageId:"HIS",lodging:{propertyId:t,checkin:d,checkout:s,rooms:g,searchCriteria:{selections:null==m?void 0:m.selections}}},placementId:"210",configurationIdentifier:He}}(null!=_?_:m,c,d),Y=p&&l.createElement(A.b,{navigationContent:{onClick:function(){B&&!U?G("full"):o()},navIconLabel:B&&!U?null==p||null===(F=p.secondaryIcon)||void 0===F?void 0:F.description:null==p||null===(V=p.icon)||void 0===V?void 0:V.description,navType:function(){var e,n;return B&&!U?Xe.get((null==p||null===(n=p.secondaryIcon)||void 0===n?void 0:n.id)||""):Xe.get((null==p||null===(e=p.icon)||void 0===e?void 0:e.id)||"")}()},toolbarTitle:U?"":(null==p?void 0:p.title)||""}),Q=l.createElement(P.E,{rows:["48px"],columns:["48px","1fr"],space:"three"},l.createElement(P.a,{colSpan:1},l.createElement(h.a,{ratio:h.E.R1_1,roundcorner:["max"]},l.createElement(h.b,{placeholderImage:!0,src:null==c?void 0:c.src,alt:null==c?void 0:c.alt}))),l.createElement(P.a,null,l.createElement(C.i,{space:"two",alignItems:"center"},l.createElement(C.j,null,l.createElement(w.E,{tag:"h3",size:k?5:4},E))))),K=l.createElement(l.Fragment,null,l.createElement(v.b,{margin:{blockend:"four"}},Q),l.createElement(M.AH,{inputs:H,LoadingPlaceholder:We,isSimilarImagesFeatureOn:!0,titleProps:{tag:"h3"}})),W=l.createElement(l.Fragment,null,l.createElement(v.b,{padding:{inlinestart:"six",blockstart:"six",blockend:"six"}},l.createElement(w.E,{tag:"h3",size:4},E)),l.createElement(g.f,{padded:!1},l.createElement(v.b,{padding:{inline:"six",blockend:"six"}},l.createElement(P.E,{columns:3,space:"six"},l.createElement(P.a,{colSpan:1},l.createElement("div",null,l.createElement(S.d,{type:"sticky",position:{top:"zero"},cloneElement:!0},l.createElement(h.a,{ratio:h.E.R16_9,roundcorner:{medium:["all"]}},l.createElement(h.b,{placeholderImage:!0,src:null==c?void 0:c.src,alt:null==c?void 0:c.alt}))))),l.createElement(P.a,{colSpan:"all",colStart:2},l.createElement("div",null,l.createElement(M.AH,{inputs:H,LoadingPlaceholder:We,isSimilarImagesFeatureOn:!0,titleProps:{tag:"h3"}})))))));return l.createElement(b.l_,null,l.createElement(b.Vk,null,l.createElement(g.e,{returnFocusOnClose:!0,type:U?"bottom":O,isVisible:s,triggerRef:u,height:z},Y,l.createElement(g.f,null,U?l.createElement(Ke,{data:I,closeDialog:o}):K))),l.createElement(b.N2,null,l.createElement(qe,{isDialogOpen:s,triggerRef:u,toolbarComponent:Y,sheetContent:U?l.createElement(Ke,{data:I,closeDialog:o}):l.createElement(g.f,{padded:!0},K)})),l.createElement(b.N0,null,l.createElement(qe,{isDialogOpen:s,triggerRef:u,toolbarComponent:Y,sheetContent:U?l.createElement(Ke,{data:I,closeDialog:o}):W})))};Ze.displayName="SimilarImagesDialog",Ze.fragment=$e;var Je=(0,a.Ps)(me(),Re.fragment,Ze.fragment),en=function(e,n){return l.createElement(C.i,{justifyContent:"space-around",alignItems:"center"},l.createElement(C.j,null,l.createElement(O.b,{iconId:"prev-button-media-gallery",iconTitle:"Show previous card",onClick:function(){e.current&&e.current.changeIndex(n-1)}})),l.createElement(C.j,null,l.createElement(O.a,{iconId:"next-button-media-gallery",iconTitle:"Show next card",onClick:function(){e.current&&e.current.changeIndex(n+1)}})))},nn=function(e){var n,t,a,i,r,c,m,d,s,p=e.data,f=e.allImages,E=e.isDialogOpen,y=e.onDialogDismiss,I=e.imageIndexState,k=e.categoryImageIndexState,S=e.categoryIndexState,x=e.propertyId,D=e.mediaGalleryStartIndexState,_=e.carouselRef,L=e.triggerRef,O=e.onSimilarImagesDialogOpen,G=p.categorizedImages,M=p.mediaGalleryDialog,R=null==M||null===(n=M.similarImageDialog)||void 0===n?void 0:n.trigger,N=J(I,2),V=(N[0],N[1]),F=J(k,2),B=F[0],j=F[1],U=J(S,1)[0],z=J(D,2),H=z[0],Y=(z[1],J(l.useState(H),2)),Q=Y[0],K=Y[1],W="Guest photos"===(null==G||null===(t=G[U])||void 0===t?void 0:t.categoryId),Z=(0,o.Gv)(),ee=(0,b.uQ)(($(s={},b.Cu.SMALL,!0),$(s,b.Cu.MEDIUM,!1),s)),ne=l.useMemo((function(){if(U<0)return ke(f);var e=G?G[U]:null;return ke((null==e?void 0:e.images)||[])}),[U,G,f]),te=l.useMemo((function(){var e={id:"HOT.HIS.PhotoGalleryTrigger",description:"Change image in media gallery",callback:function(e,n){var t,l,a=function(e,n,t){return t.includes("clickRight")||t.includes("scrollRight")?e<n-1?e+1:e:t.includes("clickLeft")||t.includes("scrollLeft")?e>0?e-1:0:t.includes("itemViewed")?parseInt((null==t?void 0:t.split(".")[(null==t?void 0:t.split(".").length)-1])||"0",10):e}(B,ne.length,e),i=(null===(l=((null==G||null===(t=G[U])||void 0===t?void 0:t.images)||f)[a])||void 0===l?void 0:l.analytics)||{},r=i.trackingId,o=i.imageId;Z(e,n,void 0,xe(a,r,ne.length,o,x,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}};return e}),[Z]),le=l.useMemo((function(){var e={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close review gallery dialog",callback:function(e,n){var t,l,a=(null===(l=((null==G||null===(t=G[U])||void 0===t?void 0:t.images)||f)[B])||void 0===l?void 0:l.analytics)||{},i=a.trackingId,r=a.imageId;Z(e,n,void 0,xe(B,i,ne.length,r,x,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}};return e}),[Z]),ae={analytics:te,carouselHeaderText:"MediaGalleryCarousel",carouselName:"MediaGalleryCarousel",itemsVisible:{sm:1,md:1,lg:1,xl:1},onIndexChange:l.useCallback((function(e){K(e),U<0?V(e):j(e)}),[U,j,V,K]),pagingInset:!0,pagingPersistent:!0,stretchToFill:!1,navigationIconId:{next:"next-button-media-gallery",prev:"prev-button-media-gallery"},buttonText:{nextButton:"Show next card",prevButton:"Show previous card"},pageBy:1,peek:!1,hideNav:!0};if(!(null==ne?void 0:ne.length))return null;var ie,re=ne.map((function(e,n){return l.createElement(h.a,{key:n,ratio:h.E.R16_9},l.createElement(h.b,{alt:e.alt,src:e.src}))}));return l.createElement(g.e,{isVisible:E,liveAnnounceString:"Full Sheet has opened",type:"full",triggerRef:L,theme:"dark"},l.createElement(A.d,{overlay:!0,navigationContent:{navButtonId:"UitkMediaGalleryImageToolbar",navType:(ie=null==M||null===(i=M.toolbar)||void 0===i||null===(a=i.icon)||void 0===a?void 0:a.id,"arrow_back"===ie?"back":"close"),navIconLabel:null==M||null===(c=M.toolbar)||void 0===c||null===(r=c.icon)||void 0===r?void 0:r.description,onClick:y,onClickAnalytics:le}}),l.createElement(g.f,{padded:!1},l.createElement(C.i,{direction:"column",blockSize:"full_size"},l.createElement(b.l_,null,l.createElement(b.Vk,null,l.createElement(l.Fragment,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{blockstart:"twelve"}},l.createElement(T.E,q(X({},ae),{carouselRef:_,fullSheetVisible:E,startIndex:H,stretchToFill:!0}),re))),l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},en(_,Q))))),l.createElement(b.N2,null,l.createElement(l.Fragment,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{blockstart:"twelve"}},l.createElement(T.E,q(X({},ae),{carouselRef:_,fullSheetVisible:E,startIndex:H}),re))),l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},en(_,Q))))),l.createElement(b.N0,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(T.E,q(X({},ae),{hideNav:!1,fullSheetVisible:E,startIndex:H}),re))))),l.createElement(C.j,null,l.createElement(u.Experiment,{name:"Similar_images",logExposure:!1},l.createElement(u.ExperimentControl,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(C.i,{justifyContent:"space-between",alignItems:"end"},l.createElement(C.j,null,l.createElement(w.c,{theme:"inverse",overflow:"wrap"},null===(m=ne[Q])||void 0===m?void 0:m.caption)),l.createElement(C.j,null,l.createElement(w.c,{theme:"inverse"},"".concat(String(Q+1),"/").concat(String(ne.length))))))),l.createElement(u.ExperimentVariant,{bucket:1},l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(P.E,{columns:{small:["auto","min-content"],large:["auto","min-content","max-content"]},alignItems:ee?"end":"center",space:"three"},l.createElement(P.a,{colSpan:1},l.createElement(w.c,{theme:"inverse",overflow:"wrap"},null===(d=ne[Q])||void 0===d?void 0:d.caption)),l.createElement(P.a,{colSpan:1},l.createElement(C.i,{direction:"column",justifyContent:"end",alignItems:"end"},l.createElement(w.c,{theme:"inverse"},"".concat(String(Q+1),"/").concat(String(ne.length))))),l.createElement(P.a,{colSpan:{small:2,large:1}},l.createElement(C.i,{justifyContent:"center"},l.createElement(v.b,{margin:{block:"two"}},l.createElement("div",null,R&&!W&&l.createElement(Ue,{onSimilarImagesDialogOpen:O,selectedImage:ne[Q],similarImagesButton:R})))))))))))))};nn.displayName="MediaGalleryDialog",nn.fragment=Je;var tn=function(e){var n,t,a,i,r=e.images,c=e.onImageSelected,d=e.columns,s=e.space,g=e.imagesRatio,p=e.focusIndex,f=e.containerRef,E=e.propertyId,y=e.categoryId,h=e.similarImagesCTA,I=e.onSimilarImagesDialogOpen,k=e.travelSearchCriteria,C=1===(0,u.useExperiment)("Similar_images",!1).exposure.bucket&&"Guest photos"!==y,x=(0,l.useContext)(ve).multiModuleUgcContentData,T=1===(0,u.useExperiment)("PDP_Location_Highlights",!1).exposure.bucket,D=J((0,l.useState)(T&&"all"===y),2),_=D[0],A=D[1];(0,l.useEffect)((function(){A(!!(T&&"all"===y))}),[y]);var L=l.useCallback((function(e){return l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer1"},type:"absolute"},l.createElement(ze,{onSimilarImagesDialogOpen:I,selectedImage:null==r?void 0:r[e],similarImagesButton:h,shouldShowAnimatedButton:e<10}))}),[r,h,I]);if(!(null==r?void 0:r.length))return null;var O=l.createElement(m.RI,{inputs:{featureId:"ugc_content_on_images_script_tpl",productIdentifier:{id:E,type:m.fT.PROPERTY_ID,travelSearchCriteria:k}},batchKey:"default-product-details-experience-batch-key",mockData:x}),G="ugc_content_insert_position"===(null==x||null===(t=x.randomAccessOne)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.id)?Number(null==x||null===(i=x.randomAccessOne)||void 0===i||null===(a=i.metadata)||void 0===a?void 0:a.name):2,M=l.createElement("div",{"data-stid":"multi-module-ugc-content"},O),R=function(e,n){return l.createElement(P.a,{key:n},l.createElement("div",{"data-stid":"image-thumbnail-view-with-label"},e.thumbnailClickAnalytics&&l.createElement(o.Pt,{trackOnce:!0,referrerId:"HOT.HIS.ThumbnailImageImpression.".concat(y?"".concat(y,"."):"").concat(n),linkName:"Thumbnail Image Impression",additionalUisPrimeMicroMessages:xe(n,e.trackingId,r.length,e.imageId,E,"PDP_FULL_IMAGE_GALLERY",y)},l.createElement(S.d,{cloneElement:!0,type:"relative"},l.createElement("div",null,l.createElement(Q.f,q(X({},e),{index:n,imagesRatio:g,onImageSelected:function(){return c(n)},focusIndex:p,containerRef:f})),C&&L(n)))),!e.thumbnailClickAnalytics&&l.createElement(S.d,{type:"relative"},l.createElement("div",null,l.createElement(Q.f,q(X({},e),{index:n,imagesRatio:g,onImageSelected:function(){return c(n)},focusIndex:p,containerRef:f})),C&&L(n))),l.createElement(v.b,{margin:{blockstart:"two",blockend:"three"}},l.createElement(w.c,{align:"left",overflow:"wrap","aria-hidden":"true"},e.displayCaption))))},N=function(e){return l.createElement(l.Fragment,null,_?r.map((function(n,t){return l.createElement(l.Fragment,null,t===G&&l.createElement(P.a,{colSpan:e},M),R(n,t))})):r.map((function(e,n){return R(e,n)})))};return l.createElement(Y.E,{bullet:"no-bullet",spacing:!1},l.createElement(P.E,{columns:d,space:s},l.createElement(b.l_,null,l.createElement(b.N2,null,N(2)),l.createElement(b.Vk,null,N(1)))))};tn.displayName="MediaGalleryThumbnailView";var ln=function(e){var n=e.categories,t=e.images,a=e.onImageClick,i=e.categoryIndexState,r=e.imageIndexState,c=e.propertyId,u=e.showImageNumber,m=void 0!==u&&u,d=e.refGallery,s=e.isSmallView,g=e.refContent,p=e.onPillSelect,f=e.onThumbnailGalleryButtonClick,E=e.similarImagesCTA,y=e.onSimilarImagesDialogOpen,I=e.travelSearchCriteria,k=J(r,1)[0],T=J(i,1)[0],D=!(null==n?void 0:n.length)||1===n.length,_=l.useRef(null),A=l.useRef({}),L=l.useRef(null),O=(0,o.Gv)(),M=((0,b.lS)({viewSizes:b.wl}),b.wl.LARGE,J(l.useState(T>=0||!(null==n?void 0:n.length)?T:0),2)),R=M[0],N=M[1],V=J(l.useState([]),2),F=V[0],B=V[1];l.useEffect((function(){var e=new Array(null==n?void 0:n.length).fill(!1);e[0]=!e[0],B(e)}),[n]);var j=l.useCallback((function(e){if(e){var n=e.linkName,t=e.referrerId;O(t,n)}f&&f()}),[O,f]),Y=l.useCallback((function(e){var t,l,a,i,r;if(n){var o,c=e>=0?null===(o=n[e])||void 0===o?void 0:o.categoryName:"";O("HOT.HIS.Gallery.".concat(c,".").concat(e),"Selected gallery tab")}var u=new Array(F.length).fill(!1);u[e]=!0,B(u),N(e),p&&p(e);var m=(null===(t=A.current[e])||void 0===t?void 0:t.offsetTop)||0,s=(null===(a=L.current)||void 0===a||null===(l=a.offsetParent)||void 0===l?void 0:l.clientHeight)||0;null==d||null===(r=d.current)||void 0===r||null===(i=r.offsetParent)||void 0===i||i.scrollTo(0,m-s)}),[N,n,O,F.length,d]),Q=l.useCallback((function(e){if(R){var l,i,r,o=(null==n?void 0:n[R])||{},u=o.categoryId,m=o.images,d=void 0===m?[]:m,s=(null===(l=d[e])||void 0===l?void 0:l.analytics)||{},g=s.trackingId,v=s.imageId,p=null===(r=d[e])||void 0===r||null===(i=r.image)||void 0===i?void 0:i.analytics,f=d.length;O("HOT.HIS.ClickThumbnailImage.".concat(u,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,xe(e,g,f,v,c,"PDP_FULL_IMAGE_GALLERY")),p&&O(null==p?void 0:p.referrerId,null==p?void 0:p.linkName),a(e,R)}else{var E,y,b,h=(null===(E=t[e])||void 0===E?void 0:E.analytics)||{},I=h.trackingId,k=h.imageId,C=null===(b=t[e])||void 0===b||null===(y=b.image)||void 0===y?void 0:y.analytics;O("HOT.HIS.ClickThumbnailImage.".concat(e),"Launch Thumbnail Gallery From Image Click",void 0,xe(e,I,t.length,k,c,"PDP_FULL_IMAGE_GALLERY")),C&&O(null==C?void 0:C.referrerId,null==C?void 0:C.linkName),a(e,R)}}),[R,a,n,O,t,c]),K=l.useCallback((function(e,n,t){return l.createElement(tn,{onSimilarImagesDialogOpen:y,imagesRatio:h.E.R16_9,images:e,onImageSelected:Q,columns:n,space:"three",focusIndex:k,propertyId:c,categoryId:t,similarImagesCTA:E,travelSearchCriteria:I})}),[Q,k,c]),W=l.useCallback((function(e,n,t,a,i,r,o,c){var u,m=c===R,d=(null==o?void 0:o.button)||{},s=d.analytics,g=d.primary,p=d.accessibility,f=l.createElement(l.Fragment,null,n&&l.createElement(v.b,{padding:{blockend:"three"}},l.createElement(w.E,{tag:r,size:i,id:"category-".concat(c)},l.createElement("div",{ref:(u=c,function(e){A.current[u]=e})},n))),g&&l.createElement(v.b,{margin:{blockend:"three"}},l.createElement(G.E,{"data-stid":"category-gallery-button","aria-label":null!=p?p:void 0,size:x.E.MEDIUM,onClick:function(){return j(s)}},g)),K(e,a,t));if(m||D)return l.createElement(v.b,{padding:{blockend:"three",small:{inline:"three"},medium:{inline:"three"}}},l.createElement("div",null,f))}),[K,R]),$=l.useCallback((function(e,n,t,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return l.createElement(b.l_,null,l.createElement(b.Vk,null,W(e,n,t,1,4,"h4",a,i)),l.createElement(b.N2,null,W(e,n,t,2,3,"h3",a,i)),l.createElement(b.N0,null,W(e,n,t,2,3,"h3",a,i)))}),[W,2]),X=l.useCallback((function(e,n){return $(ke(e.images),e.categoryName,e.categoryId,e.galleryButton||void 0,n)}),[$]);if(!(null==n?void 0:n.length)||1===n.length)return $(ke(t),void 0,void 0,void 0,0);var q=l.createElement(l.Fragment,null,l.createElement(S.d,{type:"sticky",position:{top:"zero",zindex:"layer2"},display:"block"},l.createElement(v.b,{padding:{small:{block:"one",inline:"three"},medium:{block:"one",inline:"three"},large:{block:"three",inline:"three"}}},l.createElement(H.V,{layout:"fullwidth",paddedViewRow:!1,canvasTheme:"primary"},l.createElement("div",{ref:L},l.createElement(z.E,{direction:"horizontal"},l.createElement(v.b,{padding:{small:{block:"three"},medium:{block:"three"},large:{block:"one"}}},l.createElement(S.d,{type:"relative"},l.createElement(C.i,null,n.map((function(e,n){var t=e.images.length,a=m?"".concat(null==e?void 0:e.categoryName," (").concat(t,")"):null==e?void 0:e.categoryName;return l.createElement(U.E,{key:"thumbail-gallery-pill-".concat(n),id:"thumbail-gallery-pill-".concat(n),checked:F[n],onChange:function(){return Y(n)},value:null==e?void 0:e.categoryName},a)})))))))))),s?l.createElement(P.E,{blockSize:"85vb"},l.createElement(z.E,{direction:"vertical"},l.createElement("div",{ref:g,style:{height:"1px"}}),n.map((function(e,n){return X(e,n)})))):n.map((function(e,n){return X(e,n)})));return D?$(ke(t)):l.createElement(l.Fragment,null,l.createElement("div",{ref:_}),l.createElement(S.d,{type:"sticky",position:{top:"zero",zindex:"layer2"},cloneElement:!0},q))},an=(0,a.Ps)(de(),Re.fragment),rn=function(e){var n,t,a,i,r,c,u,m=e.data,d=e.allImages,s=e.isDialogOpen,p=e.onDialogDismiss,f=e.onImageClick,E=e.categoryIndexState,y=e.imageIndexState,h=e.triggerRef,I=e.propertyId,k=e.onThumbnailGalleryButtonClick,x=e.onSimilarImagesDialogOpen,T=e.similarImagesCTA,D=e.travelSearchCriteria,_=m.categorizedImages,P=m.thumbnailGalleryDialog,O=null==P||null===(n=P.primaryButton)||void 0===n?void 0:n.button,G=(0,j.Bz)().scrollTo,M=(0,j.xK)().getTargets,N=(0,F.YD)({threshold:0}),V=N.ref,U=N.inView,z=N.entry,H=J((0,l.useState)(!1),2),Y=(H[0],H[1]),Q=J(E,2),K=Q[0],W=Q[1],$=l.useRef(null),Z=(0,o.Gv)();(0,l.useEffect)((function(){!U&&(null==z?void 0:z.target)&&Y(!0)}),[U]);var ee,ne,te=function(){if(null==O?void 0:O.analytics){var e=O.analytics,n=e.linkName,t=e.referrerId,l="".concat(t,".Thumbnail_Gallery");Z(l,n)}setTimeout((function(){p(),setTimeout((function(){var e,n=null==P||null===(e=P.primaryButton)||void 0===e?void 0:e.targetRef;n&&(G(n,[{sectionName:"navigation"}]),setTimeout((function(){var e,t=M([n])[n];null==t||null===(e=t.current)||void 0===e||e.focus({preventScroll:!0})}),300))}),500)}),300)},le=(null==_||null===(t=_.find((function(e){return"all"===e.categoryId})))||void 0===t||t.images.length,O&&l.createElement(v.b,{padding:{blockend:"two"}},l.createElement(S.d,{type:"absolute",position:{bottom:"six",left:"center",zindex:"layer1"}},l.createElement(B.E,{onClick:te,"aria-label":null!==(ee=O.accessibility)&&void 0!==ee?ee:""},O.primary)))),ae=O&&l.createElement(R.E,{"aria-label":null!==(ne=O.accessibility)&&void 0!==ne?ne:"",onClick:te},l.createElement(w.c,{whiteSpace:"nowrap",theme:"light"},O.primary)),ie={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close thumbnail gallery dialog",callback:function(e,n){var t,l,a,i=J(y,1)[0],r=null!==(a=null===(l=_[K])||void 0===l||null===(t=l.images)||void 0===t?void 0:t.length)&&void 0!==a?a:d.length;Z(e,n,void 0,xe(i,void 0,r,void 0,I,"PDP_FULL_IMAGE_GALLERY"))}},re=P&&l.createElement(v.b,{padding:{inlineend:"three"}},l.createElement(A.b,{navigationContent:{onClick:p,onClickAnalytics:ie,navType:null===(i=P.toolbar)||void 0===i||null===(a=i.icon)||void 0===a?void 0:a.id,navIconLabel:null===(c=P.toolbar)||void 0===c||null===(r=c.icon)||void 0===r?void 0:r.description},toolbarTitle:(null===(u=P.toolbar)||void 0===u?void 0:u.title)||"",toolbarActionContent:l.createElement(b.l_,null,l.createElement(b.N2,null,l.createElement(l.Fragment,null,ae)))})),oe={returnFocusOnClose:!0,isVisible:s,triggerRef:h},ce=function(e){W(e),Y(!0)},ue=function(e){return l.createElement(ln,{categories:_,onSimilarImagesDialogOpen:x,images:d,onImageClick:f,categoryIndexState:E,imageIndexState:y,propertyId:I,showImageNumber:!0,refGallery:$,isSmallView:e,refContent:V,onPillSelect:ce,onThumbnailGalleryButtonClick:k,similarImagesCTA:T,travelSearchCriteria:D})},me=function(e){return l.createElement(l.Fragment,null,re,l.createElement(g.f,{padded:!1},l.createElement("div",{ref:$},ue(e))))};g.e,v.b,g.f,C.i,C.j,ue(!1);return l.createElement(b.l_,null,l.createElement(b.Vk,null,l.createElement(g.e,q(X({},oe),{type:"full"}),me(!0),le)),l.createElement(b.N2,null,l.createElement(L.A0,q(X({},oe),{centeredSheetSize:"xxxlarge",height:1200}),me(!1))))};rn.displayName="ThumbnailGalleryDialog",rn.fragment=an;var on=function(e,n){var t=function(e){return(0,l.useMemo)((function(){var n,t;return(null==e||null===(t=e.categorizedImages)||void 0===t||null===(n=t.find((function(n){return n.categoryId===e.categoryIdAll})))||void 0===n?void 0:n.images)||[]}),[e])}(e);return(0,l.useMemo)((function(){if(!(null==n?void 0:n.length)||!t.length)return t;var e=t.map((function(e){var n,t,l;return q(X({},e),{baseUrl:null!==(l=(null!==(t=null===(n=e.lowResImage)||void 0===n?void 0:n.url)&&void 0!==t?t:e.image.url).split("?")[0])&&void 0!==l?l:""})})),l=n.map((function(e){return q(X({},e),{baseUrl:e.url.split("?")[0]})})),a=l.reduce((function(e,n,t){return q(X({},e),$({},n.baseUrl,t))}),{}),i=l.reduce((function(e,n){return q(X({},e),$({},n.baseUrl,n))}),{}),r=ne(e.filter((function(e){return i[e.baseUrl]})).map((function(e){var n,t;return q(X({},e),{image:q(X({},e.image),{url:(null===(n=i[e.baseUrl])||void 0===n?void 0:n.url)||e.image.url}),lowResImage:q(X({},e.lowResImage),{url:(null===(t=i[e.baseUrl])||void 0===t?void 0:t.url)||""})})}))).sort((function(e,n){return(a[e.baseUrl]||-1)-(a[n.baseUrl]||-1)})).map((function(e){e.baseUrl;return Z(e,["baseUrl"])})),o=t.filter((function(n,t){var l,a;return!i[null!==(a=null===(l=e[t])||void 0===l?void 0:l.baseUrl)&&void 0!==a?a:""]}));return ne(r).concat(ne(o))}),[t,n])},cn=(0,a.Ps)(se(),Be.fragment,Ve.fragment,nn.fragment,rn.fragment,Pe.fragment),un=function(e){var n,t,a,i,r,o,c,m,d,s,h,I=e.propertyId,k=e.data,C=e.placeholderData,S=e.className,x=(e.shoppingContext,e.travelSearchCriteria),T=e.onClickSeeAllReviewsButton,D=J((0,f.useDialog)("media-gallery","pwaDialogNested"),3),_=D[0],P=D[1],w=D[2],A=J((0,f.useDialog)("thumbnail-gallery","pwaThumbnailDialog"),3),L=A[0],O=A[1],G=A[2],M=J((0,f.useDialog)("aerial-view","pwaAerialDialog"),3),R=M[0],N=M[1],V=M[2],F=J((0,f.useDialog)("property-similar-image","pwaSimilarImageDialog"),3),B=F[0],j=F[1],U=F[2],z=l.useRef(null),H=l.useRef(null),Y=l.useRef(null),Q=l.useState(0),K=l.useState(-1),$=l.useState(0),q=l.useState(0),Z=J(Q,2)[1],ee=J(K,2)[1],ne=J($,2)[1],te=J(q,2)[1],ae=J(l.useState(""),2),ie=ae[0],re=ae[1],oe=J(l.useState(),2),ce=oe[0],ue=oe[1],me=on(k,C),de=(0,E.useLoggerEvents)(Ee),se=(0,l.useContext)(Ce),ge=se.useControlGalleryAdaptexCampaign,pe=(se.data,fe()),he=(s=(0,y.s0)(),h=(0,y.TH)(),(0,l.useCallback)((function(e){var n=new URLSearchParams(h.search);n.delete(e),s("".concat(h.pathname,"?").concat(n),{replace:!0})}),[h,s])),ke=(0,u.useExperiment)("Larger_image_mosaic_on_top_of_pdp",!0).exposure.bucket,Se=(0,u.useExperiment)("Adaptex_campaign_PDP_mosaic_for_small_screens").exposure.bucket,xe=(0,l.useContext)(ve).isRandomAccessOne,Te=null==k||null===(t=k.mediaGalleryDialog)||void 0===t||null===(n=t.similarImageDialog)||void 0===n?void 0:n.trigger;l.useEffect((function(){if((ke>0||1===Se)&&pe.get("imageIndex")){var e=Number(pe.get("imageIndex"));Z(e),he("imageIndex")}}),[ke,Se,he,pe,Z]);var De,_e,we=l.useCallback((function(e){Z(e),ee(-1),z.current=document.activeElement,O.openDialog()}),[O,ee,Z]),Ae=l.useCallback((function(e){window.open(e)}),[]),Le=l.useCallback((De=function(e){return le(this,(function(n){return ie||function(e){return fetch("https://aerialview.googleapis.com/v1/videos:lookupVideo?key=".concat("AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68","&videoId=").concat(e),{method:"GET",headers:new Headers({"Content-Type":"application/json",Referer:"https://www.expedia.com/"})}).then((function(e){return e.json()}))}(e).then((function(e){var n,t;(null==e||null===(n=e.uris)||void 0===n?void 0:n.MP4_MEDIUM)?(re(e.uris.MP4_MEDIUM.landscapeUri),de.VIDEO_SUCCESS.log(ye+I)):(de.VIDEO_FAILED.log({message:be+I,error:null==e||null===(t=e.error)||void 0===t?void 0:t.message}),re("error"))})),N.openDialog(),[2]}))},_e=function(){var e=this,n=arguments;return new Promise((function(t,l){var a=De.apply(e,n);function i(e){W(a,t,l,i,r,"next",e)}function r(e){W(a,t,l,i,r,"throw",e)}i(void 0)}))},function(e){return _e.apply(this,arguments)}),[N,re]),Oe=null==k||null===(a=k.galleryButtons)||void 0===a?void 0:a.find((function(e){var n;return"visibility"===(null===(n=e.icon)||void 0===n?void 0:n.id)})),Ge=null==Oe||null===(i=Oe.icon)||void 0===i?void 0:i.description,Me=pe.get("similarImageId"),Re=null;if(null!==Me){var Ne=me.find((function(e){var n;return(null==e||null===(n=e.analytics)||void 0===n?void 0:n.imageId)===Me}));Ne&&(Re=Ie(Ne))}var Fe=ce||Re,Ue=l.useCallback((function(){ee(-1),O.openDialog()}),[O,ee]),ze=l.useCallback((function(e){if(e){var n=document.activeElement;Y.current=n,ue(e),j.openDialog()}}),[j]),He=l.useCallback((function(){j.closeDialog(),setTimeout((function(){var e;null===(e=Y.current)||void 0===e||e.focus()}),0)}),[j]),Ye=l.useCallback((function(e,n){H.current=document.activeElement,ee(n),ne(e),n<0&&Z(e),te(e),P.openDialog()}),[ee,ne,P,Z,te]),Qe=l.useCallback((function(){var e=document.activeElement;z.current=e,Z(0),ee(-1),O.openDialog()}),[O,Z,ee]),Ke=l.useCallback((function(){O.closeDialog(),setTimeout((function(){var e;null===(e=z.current)||void 0===e||e.focus()}),0)}),[O]),We=l.useCallback((function(){P.closeDialog(),setTimeout((function(){var e;null===(e=H.current)||void 0===e||e.focus()}),0)}),[P]),$e=l.useCallback((function(){N.closeDialog(),setTimeout((function(){var e;null===(e=z.current)||void 0===e||e.focus()}))}),[N]),Xe=l.useRef(null);if(!k||!me.length)return null;var qe={imageIndexState:Q,categoryImageIndexState:$,categoryIndexState:K,similarImagesCTA:Te,onSimilarImagesDialogOpen:ze},Je=X({onTriggerClick:Qe,onVirtualTourClick:Ae,onAerialViewClick:Le,thumbnailDialogTriggerTitle:null==k||null===(o=k.thumbnailGalleryDialog)||void 0===o||null===(r=o.trigger)||void 0===r?void 0:r.value,thumbnailDialogTriggerAccessibilityLabel:null==k||null===(m=k.thumbnailGalleryDialog)||void 0===m||null===(c=m.trigger)||void 0===c?void 0:c.accessibilityLabel,propertyId:I,data:k,allImages:me},qe),en=function(e){return l.createElement(Be,X({onImageClick:function(e){return we(e)},imagesToShow:e},Je))},tn=l.createElement(Ve,X({onImageClick:Ue},Je)),ln=function(e){return l.createElement(l.Fragment,null,l.createElement(u.Experiment,{name:"Larger_image_mosaic_on_top_of_pdp"},l.createElement(u.ExperimentControl,null,en(e)),l.createElement(u.ExperimentVariant,{bucket:1},en(e)),l.createElement(u.ExperimentVariant,{bucket:2},en(e))),l.createElement(Pe,{data:k,onThumbnailGalleryClick:Je.onTriggerClick,onVirtualTourClick:Ae,onAerialViewClick:Le,thumbnailButtonText:Je.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Je.thumbnailDialogTriggerAccessibilityLabel,propertyId:I}))},an=l.createElement(u.Experiment,{name:"Adaptex_campaign_PDP_mosaic_for_small_screens"},l.createElement(u.ExperimentControl,null,tn),l.createElement(u.ExperimentVariant,{bucket:1},!ge&&l.createElement(Pe,{data:k,onThumbnailGalleryClick:Je.onTriggerClick,onVirtualTourClick:Ae,onAerialViewClick:Le,thumbnailButtonText:Je.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Je.thumbnailDialogTriggerAccessibilityLabel,propertyId:I}))),cn=l.createElement(l.Fragment,null,l.createElement(g.h,{isVisible:L},l.createElement(G,null,l.createElement(rn,X({allImages:me,data:k,isDialogOpen:L,onDialogDismiss:Ke,onImageClick:Ye,triggerRef:z,propertyId:I,onThumbnailGalleryButtonClick:T,travelSearchCriteria:x},qe)))),l.createElement(g.h,{isVisible:_},l.createElement(w,null,l.createElement(nn,X({allImages:me,data:k,isDialogOpen:_,onDialogDismiss:We,propertyId:I,mediaGalleryStartIndexState:q,carouselRef:Xe,triggerRef:H},qe)))),l.createElement(g.h,{isVisible:R},l.createElement(V,null,l.createElement(je,{isDialogOpen:R,onDialogDismiss:$e,triggerRef:z,aerialViewLandscape:ie,aerialViewDescription:Ge}))),l.createElement(g.h,{isVisible:B},l.createElement(U,null,(null==k||null===(d=k.mediaGalleryDialog)||void 0===d?void 0:d.similarImageDialog)&&Fe&&l.createElement(Ze,{data:k.mediaGalleryDialog.similarImageDialog,onDialogDismiss:He,selectedSimilarImage:Fe,triggerRef:Y,travelSearchCriteria:x,propertyId:I})))),un=l.createElement(b.l_,null,l.createElement(b.Vk,null,an),l.createElement(b.N2,null,ln(3)),l.createElement(b.N0,null,ln(5))),mn=l.createElement(l.Fragment,null,l.createElement(b.l_,null,l.createElement(b.Vk,null,tn),l.createElement(b.N2,null,l.createElement(l.Fragment,null,en(3),l.createElement(Pe,{data:k,onThumbnailGalleryClick:Je.onTriggerClick,onVirtualTourClick:Ae,onAerialViewClick:Le,thumbnailButtonText:Je.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Je.thumbnailDialogTriggerAccessibilityLabel,propertyId:I}))),l.createElement(b.N0,null,l.createElement(l.Fragment,null,en(5),l.createElement(Pe,{data:k,onThumbnailGalleryClick:Je.onTriggerClick,onVirtualTourClick:Ae,onAerialViewClick:Le,thumbnailButtonText:Je.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Je.thumbnailDialogTriggerAccessibilityLabel,propertyId:I})))),l.createElement(p.EGDSThemeProvider,{config:{lightMode:{colorTheme:"bright-1"}},isColorThemeContainer:!0},l.createElement(v.b,{padding:"half"},l.createElement("div",{"data-stid":"luxury-ribbon"}))));return xe||1!==ke&&1!==Se?l.createElement("div",{className:S},xe?mn:un,cn):l.createElement("div",{className:S},un,cn)};un.displayName="ProductGalleryImageContainer",un.fragment=cn;var mn=function(e){var n=e.images,t=function(){var e=J((0,l.useState)(!1),2),n=e[0],t=e[1];return(0,l.useEffect)((function(){t(!0)}),[]),n}(),a=(0,l.useContext)(ve).isRandomAccessOne;return l.createElement(l.Fragment,null,t?l.createElement(gn,{images:n,isRandomAccessOne:a}):l.createElement(vn,{images:n,isRandomAccessOne:a}))},dn=function(e){var n=e.additionalImage,t=e.className,a=e.style,i=e.isRandomAccessOne,r=e.isMobile?h.E.R3_2:h.E.R16_9;return l.createElement(h.a,{ratio:i?h.E.R16_9:r,className:t,style:a},l.createElement(h.b,{placeholderImage:!0,src:null==n?void 0:n.url,alt:null==n?void 0:n.description,additionalProps:{fetchPriority:(null==n?void 0:n.url)?"high":void 0}}))},sn=function(e){var n=function(e){var n=e.images,t=e.isRandomAccessOne;return l.createElement(b.l_,null,l.createElement(b.Vk,null,l.createElement(dn,{additionalImage:null==n?void 0:n[0],isMobile:!0})),l.createElement(b.N2,null,l.createElement(P.E,{rows:2,columns:3,space:"half"},Array.from(Array(3)).map((function(e,a){return l.createElement(P.a,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:"gallery-placeholder-".concat(a)},l.createElement(dn,{additionalImage:null==n?void 0:n[a],isRandomAccessOne:t}))})))),l.createElement(b.N0,null,l.createElement(P.E,{rows:2,columns:4,space:"half"},Array.from(Array(5)).map((function(e,a){return l.createElement(P.a,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:"gallery-placeholder-".concat(a)},l.createElement(dn,{additionalImage:null==n?void 0:n[a],isRandomAccessOne:t}))})))))};return n.displayName=e,n},gn=sn("CsrPlaceholder"),vn=sn("SsrPlaceholder"),pn=(0,a.Ps)(ge(),un.fragment),fn=function(e){var n,t,a,g,v,p,f,E=e.inputs,y=e.skipSsr,b=e.placeholderData,h=e.batchKey,I=e.onClickSeeAllReviewsButton,k=(0,r.v)().context,C=(0,c.s0)().publish,S="default-product-details-experience-batch-key",x=q(X({},E),{context:k}),T=(0,d.gf)(),D=(0,u.useExperiment)("Luxury_PDP_Feature_Gate_Web").exposure.bucket,_=(0,u.useExperiment)("PDP_Location_Highlights",!1).exposure.bucket,P={context:k,featureId:"standout-stays",productIdentifier:{id:E.productIdentifier.id,type:m.fT.PROPERTY_ID}},w=(0,i.a)(m.zk,{variables:P,ssr:!y,errorPolicy:"all",skip:0===D}).data;(null==w||null===(t=w.randomAccessOne)||void 0===t||null===(n=t.mapping)||void 0===n?void 0:n.length)&&C(new s.W("LUXURY_PROPERTY",{message:!0}));var A={context:k,featureId:"ugc_content_on_images_script_tpl",productIdentifier:{id:E.productIdentifier.id,type:m.fT.PROPERTY_ID,shoppingContext:E.productIdentifier.shoppingContext,travelSearchCriteria:E.productIdentifier.travelSearchCriteria}},L=(0,i.a)(m.zk,{variables:A,ssr:!y,errorPolicy:"all",context:{batchKey:null!=h?h:S},skip:0===_}).data,O=(0,i.a)(pn,{context:{batchKey:null!=h?h:S},variables:x,ssr:!y,errorPolicy:"all",skip:null==T||null===(a=T.product)||void 0===a?void 0:a.productGallery}),G=O.data,M=O.loading,R=(null==T||null===(g=T.product)||void 0===g?void 0:g.productGallery)||(null==G?void 0:G.productGallery),N=null==G||null===(f=G.productGallery)||void 0===f||null===(p=f.categorizedImages)||void 0===p||null===(v=p.find((function(e){return"Guest photos"===e.categoryId})))||void 0===v?void 0:v.clientSideAnalytics,V=l.createElement(un,{propertyId:E.productIdentifier.id,data:R,placeholderData:b,shoppingContext:E.productIdentifier.shoppingContext,travelSearchCriteria:E.productIdentifier.travelSearchCriteria,onClickSeeAllReviewsButton:I});return l.createElement(pe,{data:w,multiModuleUgcContentData:L},M&&l.createElement(mn,{images:b}),N?l.createElement(o.Pt,{referrerId:N.referrerId,linkName:N.linkName,trackOnce:!0},V):V)};fn.displayName="sharedui-ProductGallery"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/blossom-flex-ui/shared-ui-retail-product-gallery.a0d1348565526872e1af.js.map