/*@license For license information please refer to shared~TravelersField.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[2302],{92413:function(e,n,t){var a;t.d(n,{J:function(){return a}}),function(e){e.IN_SEAT="seat",e.ON_LAP="lap"}(a||(a={}))},70674:function(e,n,t){var a;t.d(n,{m:function(){return a}}),function(e){e.FLIGHT_SEARCH="FLIGHT_SEARCH",e.HOTWIRE_FLIGHT_SEARCH="HOTWIRE_FLIGHT_SEARCH",e.HOTEL_SEARCH="HOTEL_SEARCH",e.HOTWIRE_HOTEL_SEARCH="HOTWIRE_HOTEL_SEARCH",e.PACKAGE_SEARCH="PACKAGE_SEARCH",e.HOTWIRE_PACKAGE_SEARCH="HOTWIRE_PACKAGE_SEARCH",e.CRUISE_SEARCH="CRUISE_SEARCH",e.GROUND_TRANSPORT_SEARCH="GROUND_TRANSPORT_SEARCH",e.CAR_SEARCH="CAR_SEARCH",e.THIRD_SEARCH="THIRD_SEARCH",e.NONE="NONE"}(a||(a={}))},83996:function(e,n,t){t.d(n,{P:function(){return Ce}});var a=t(67294),r=t(73030),i=t(52772),o=t(29323),l=t(67002),c=t(68949),u=t(10033),s=t(20698),d=t(98208),m=t(49586),f=t(76107),h=t(74243),g=t(51163),v=t(49740),p=t(45360),E=t(94469),S=t(48961),R=t(29892),T=(0,o.observer)((function(e){var n=e.onChange,t=e.id,r=e.labelKey,i=e.dataTestid,o=e.children,c=e.ageOptions,u=e.padding,s=e.menuIndex,d=(0,R.useLocalization)().formatText,m=function(e){var t=+e.currentTarget.id.slice(-1);n(s,t)(e)};return a.createElement("div",null,a.createElement(S.b,{padding:u},a.createElement(E.E,{columns:2,space:"two","data-testid":i},o.map((function(e,n){var i=d(r,n+1),o="".concat(t,"-").concat(s,"-").concat(n),u=isNaN(+o.slice(-1))?"".concat(n):o;return a.createElement(E.a,{colSpan:1,key:n},a.createElement(l.i,{label:i,value:-1===e.age?"":e.age.toString(),onChange:m,id:u,emptyState:!0},c.map((function(e){return a.createElement("option",{key:e.value,value:e.value},e.name)}))))})))))})),A="wizard.roomPicker.roomPickerOpened.liveAnnounce",O="wizard.roomPicker.roomAdded.liveAnnounce",k="wizard.roomPicker.roomRemoved.liveAnnounce",b="wizard.roomPicker.doneButton.label",C="wizard.roomPicker.addRoomButton.label",I="wizard.roomPicker.removeRoomButton.label",w="wizard.roomPicker.removeRoomButton.a11yLabel",y="wizard.roomPicker.childAgeInput.label",x="wizard.roomPicker.infantAgeInput.label",P="wizard.roomPicker.room.title",H="wizard.roomPicker.room.a11yLabel",_="wizard.roomPicker.childUpdated.liveAnnounce",L="wizard.roomPicker.infantUpdated.liveAnnounce",N="wizard.roomPicker.decreaseAdults.text",z="wizard.roomPicker.decreaseChildren.text",F="wizard.roomPicker.decreaseInfants.text",j="wizard.roomPicker.decreaseAdultsInRoom.text",G="wizard.roomPicker.decreaseChildrenInRoom.text",U="wizard.roomPicker.decreaseInfantsInRoom.text",D="wizard.roomPicker.adults.text",K="wizard.roomPicker.increaseAdults.text",B="wizard.roomPicker.increaseChildren.text",W="wizard.roomPicker.increaseInfant.text",J="wizard.roomPicker.increaseAdultsInRoom.text",M="wizard.roomPicker.increaseChildrenInRoom.text",V="wizard.roomPicker.increaseInfantInRoom.text",Y="wizard.roomPicker.children.text",Q="wizard.roomPicker.infants.text",X="wizard.airline.children.seatRules",Z="wizard.airline.children.seatRulesPlural",q="wizard.airline.children.seatOption.inSeat",$="wizard.airline.children.seatOption.onLap",ee="wizard.airline.ageRules.label",ne=t(93239),te=t(38859),ae=function(){return ae=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},ae.apply(this,arguments)},re=(0,o.inject)("analytics","context")((function(e){var n,t=a.createRef();e.roomRefs.push(t);var r,o=(0,R.useLocalization)().formatText,l=function(e,n,t,a){var r=n.adults,i=n.children;return e?a+Math.min(t,e-(r+i.length)):t},c=(0,ne.uY)(e.lobState.trackingEnabled,e.analytics,e.lobState.moduleName),u="guests.",d=e.lobState.config.elementId||"",m=d.includes("flight"),f=d.includes("car"),h=m||f?o(K):o(J,e.index+1),g=m||f?o(N):o(j,e.index+1),E=m||f?o(B):o(M,e.index+1),A=m||f?o(z):o(G,e.index+1),O=m||f?o(W):o(V,e.index+1),b=m||f?o(F):o(U,e.index+1),C=1===e.index?"six":"unset",X=1===e.index?"two":"unset";return a.createElement(S.b,{padding:{blockstart:C},margin:{blockstart:X}},a.createElement("div",{className:"roomPickerRoom","data-testid":"room-".concat(e.index+1)},e.config.withRooms&&a.createElement(S.b,{padding:{blockstart:"two"}},a.createElement("div",{ref:t,"data-testid":"room-header"},a.createElement(te.E,{size:7,tag:"h3","data-testid":"room-header-".concat(e.index),"aria-label":o(H,e.index+1,e.travelers.rooms.length),tabIndex:0},o(P,e.index+1)))),a.createElement(p.a,{label:o(D),incrementText:h,decrementText:g,description:o((null===(n=e.config)||void 0===n?void 0:n.adultsCaptionToken)||""),max:l(e.config.maxTravelersPerRoom,e.travelers.rooms[e.index],e.config.maxAdultsPerRoom,e.room.adults),min:e.config.minAdultsPerRoom,value:e.room.adults,onChange:(r=e.index,function(n){e.setTravelers({rooms:e.travelers.rooms.map((function(e,t){return t===r?ae(ae({},e),{adults:parseInt(n.target.value,10)}):e})),infantSeating:e.travelers.infantSeating}),c.trackEvent("".concat(u).concat(r,".adults"))}),className:"adultStepInput",id:"adult-input-".concat(e.index)}),a.createElement(p.a,{label:o(Y),incrementText:E,decrementText:A,description:o(e.config.childrenCaptionToken),max:l(e.config.maxTravelersPerRoom,e.travelers.rooms[e.index],e.config.maxChildrenPerRoom,e.room.children.length),min:e.config.minChildrenPerRoom,value:e.room.children.length,onChange:function(n){return function(t){var a=parseInt(t.target.value,10)>e.travelers.rooms[n].children.length,r=e.config.withAges&&e.config.validateChildInfantValues?-1:e.config.minChildAge;e.setTravelers({rooms:e.travelers.rooms.map((function(e,t){return t===n?ae(ae({},e),{children:a?e.children.concat({age:r}):e.children.slice(0,-1)}):e})),infantSeating:e.travelers.infantSeating}),c.trackEvent("".concat(u).concat(n,".children"))}}(e.index),className:"childStepInput",id:"child-input-".concat(e.index)}),e.room.children&&e.room.children.length>0&&e.config.withAges&&a.createElement(T,{ageOptions:e.childAgeOptions,onChange:function(n,t){return function(a){var r=parseInt(a.target.value,10);e.setTravelers({rooms:e.travelers.rooms.map((function(e,a){return a===n?ae(ae({},e),{children:e.children.map((function(e,n){return n===t?{age:r}:e}))}):e})),infantSeating:e.travelers.infantSeating}),(0,i.liveAnnounce)(o(_,t+1,r),i.Level.POLITE)}},children:e.room.children,padding:{blockstart:"one",blockend:"three"},menuIndex:e.index,labelKey:y,id:"child-age-input"}),e.config.withInfants&&a.createElement(a.Fragment,null,a.createElement(p.a,{label:o(Q),incrementText:O,decrementText:b,description:o(e.config.infantsCaptionToken),max:e.config.maxInfantsPerRoom,min:e.config.minInfantsPerRoom,value:e.room.infants.length,onChange:function(n){return function(t){var a=parseInt(t.target.value,10)>e.travelers.rooms[n].infants.length,r=e.config.withAges&&e.config.validateChildInfantValues?-1:e.config.minInfantAge;e.setTravelers({rooms:e.travelers.rooms.map((function(e,t){return t===n?ae(ae({},e),{infants:a?e.infants.concat({age:r}):e.infants.slice(0,-1)}):e})),infantSeating:e.travelers.infantSeating}),c.trackEvent("".concat(u).concat(n,".infants"))}}(e.index),className:"childStepInput",id:"infant-input-".concat(e.index)}),e.config.withAges&&a.createElement(T,{ageOptions:e.infantAgeOptions,onChange:function(n,t){return function(a){var r=parseInt(a.target.value,10);e.setTravelers({rooms:e.travelers.rooms.map((function(e,a){return a===n?ae(ae({},e),{infants:e.infants.map((function(e,n){return n===t?{age:r}:e}))}):e})),infantSeating:e.travelers.infantSeating}),(0,i.liveAnnounce)(o(L,t+1,r),i.Level.POLITE)}},children:e.room.infants,padding:{blockstart:"one"},dataTestid:"infant-ages",menuIndex:e.index,labelKey:x,id:"infant-age-input"})),e.index>0&&a.createElement(S.b,{padding:{blockstart:"four"}},a.createElement(v.i,{justifyContent:"end"},a.createElement(v.j,null,a.createElement("div",{className:"removeRoomButton"},a.createElement(s.E,{onClick:function(n){return function(){e.setTravelers({rooms:e.travelers.rooms.filter((function(e,t){return n!==t})),infantSeating:e.travelers.infantSeating}),(0,i.liveAnnounce)(o(k,""),i.Level.POLITE),e.setTotalRoomRefs(e.totalRoomRefs-1),c.trackEvent("".concat(u,"remove-room"))}}(e.index),"aria-label":o(w,e.index+1,e.travelers.rooms.length)},o(I))))))))})),ie=t(92413),oe=t(89105),le=t(47126),ce=t(22535),ue=(0,o.inject)("analytics")((function(e){var n=[],t=[],r=(0,R.useLocalization)().formatText,o=function(e,n,t,a){for(var i=e;i<=n;i++){var o=i===e&&t?r(t):i.toString();a.push({value:i.toString(),name:o})}};o(e.config.minChildAge,e.config.maxChildAge,e.config.youngestChildAgeTextToken,n),o(e.config.minInfantAge,e.config.maxInfantAge,e.config.youngestInfantAgeTextToken,t);var l=(0,ne.uY)(e.lobState.trackingEnabled,e.analytics,e.lobState.moduleName),c="guests.",p=(0,oe.Y)(e.travelers),E=p.numOfChildren,T=p.numOfInfants,A=e.config.withRooms&&e.travelers.rooms.length<e.config.maxRooms,k=e.config.withInfants&&e.config.withFlight&&!!T,I=e.config.withFlight&&e.config.withAges&&(!!E||e.config.withInfants&&!!T),w=T&&T>1?Z:X;return a.createElement(a.Fragment,null,a.createElement(S.b,{padding:{inline:"one",blockstart:"half",blockend:"twelve"}},a.createElement(le.E,{direction:"vertical"},a.createElement("section",null,e.travelers.rooms.map((function(r,i){return a.createElement(re,{setTravelers:e.setTravelers,travelers:e.travelers,key:i,index:i,room:r,config:e.config,roomRefs:e.roomRefs,totalRoomRefs:e.totalRoomRefs,setTotalRoomRefs:e.setTotalRoomRefs,childAgeOptions:n,infantAgeOptions:t,lobState:e.lobState})})),A&&a.createElement(v.i,{justifyContent:"end"},a.createElement(v.j,{className:"addRoomButton"},a.createElement(s.E,{onClick:function(){e.setTravelers({rooms:e.travelers.rooms.concat({adults:1,children:[],infants:[]}),infantSeating:e.travelers.infantSeating}),(0,i.liveAnnounce)(r(O,e.travelers.rooms.length+1),i.Level.POLITE),e.setTotalRoomRefs(e.totalRoomRefs+1),l.trackEvent("".concat(c,"add-room"))},"data-testid":"add-room-button"},r(C)))),k&&a.createElement(S.b,{padding:{blockstart:"six"}},a.createElement("div",{className:"airlineChildSeating"},a.createElement(S.b,{padding:{blockend:"two"}},a.createElement(te.c,{size:300},r(w))),a.createElement(f.a,{group:"InfantSeating",onChange:function(n){e.setTravelers({rooms:e.travelers.rooms,infantSeating:n.currentTarget.value})},selected:e.travelers.infantSeating},a.createElement(S.b,{padding:{inlineend:"six"}},a.createElement(f.E,{id:"ChildOnLap",value:ie.J.ON_LAP},r($))),a.createElement(S.b,{padding:{inlineend:"six"}},a.createElement(f.E,{id:"ChildInSeat",value:ie.J.IN_SEAT},r(q)))))),I&&a.createElement("div",null,a.createElement(h.E,{size:"small",className:"airlineAgeRules"},a.createElement("a",{href:"/p/info-main/h_fw_default?rhtx=HTX_FLTSRCH_RT#travs",id:"airline-age-rules",target:"_blank",rel:"noopener"},r(ee),a.createElement(g.a,{id:"airline-age-rules-opens-in-new",name:"open_in_new",title:"Opens in a new window"})))),a.createElement(S.b,{padding:{blockstart:"two",blockend:"six"}},a.createElement("div",null))))),a.createElement(ce.d,{type:"sticky",position:{bottom:"zero"}},a.createElement(u.E,{className:"guestsDoneBtn",type:u.a.BUTTON},a.createElement(d.E,{onClick:function(){e.onSave(e.travelers)},size:m.E.LARGE,isFullWidth:!0,"data-testid":"guests-done-button"},r(b)))))})),se=t(83195),de=t(19633),me=t(61007),fe=function(){return fe=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},fe.apply(this,arguments)},he=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,r,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return o},ge=function(e){var n=[],t=e.onChange,r=e.lobState,i=e.setInputsRefs,o=r.validateTravelersField,l=r.validateInfantsPerTraveler,u=r.validateUnattendedInfantInLap,s=r.config,d=(0,R.useLocalization)().formatText,m=he(a.useState(0),2),f=m[0],h=m[1],g=he(a.useState((0,c.toJS)(e.travelers)),2),v=g[0],p=g[1],E=o(),T=r.hotelTravelersInvalidKey||r.nonHotelTravelersInvalidKey||"",A=!E&&""!==T,O=he(a.useState([]),2),k=O[0],b=O[1],C=e.config,I=C.invalidNumberOfInfantPerTravelerMessageToken,w=C.invalidUnattendedInfantOnLapMessageToken,y=C.maxBookableTravelers;return a.useEffect((function(){var e=n[n.length-1];if(e&&e.current){var t=e.current.firstElementChild;t&&t.focus()}}),[f]),a.useEffect((function(){T&&(l&&!l()&&T===I?b([s.travelers.minInfantPerTraveler,s.travelers.minAdultAge]):u&&!u()&&T===w?b([s.travelers.minAdultAge]):b([y])),(0,c.toJS)(e.travelers)!==v&&r instanceof me.Zb&&p(e.travelers)}),[A,T,e.travelers]),a.createElement("div",null,a.createElement(de.l_,null,a.createElement(de.Vk,null,a.createElement(a.Fragment,null,A&&a.createElement(S.b,{padding:{inline:"one",blockstart:"two"}},a.createElement("div",null,a.createElement(S.b,{padding:{blockstart:"two"}},a.createElement(se.m,{locHeadingToken:T,locHeadingArgs:k,focusOnError:!1,setInputsRefs:i})))))),a.createElement(de.N0,null,a.createElement(S.b,{padding:{inline:"one",blockstart:"two"}},a.createElement("div",null,a.createElement(te.E,{tag:"h3",size:5},d(e.config.dialogTitleToken)),A&&a.createElement(S.b,{padding:{blockstart:"two"}},a.createElement(se.m,{locHeadingToken:T,locHeadingArgs:k,focusOnError:!1,setInputsRefs:i})))))),a.createElement(ue,fe({},e,{roomRefs:n,totalRoomRefs:f,setTotalRoomRefs:h,travelers:v,setTravelers:function(e){p(e),t(e)}})))},ve=(0,o.observer)((function(e){var n=e.travelers,t=e.onSave,r=e.onChange,i=e.config,o=e.lobState,l=e.setInputsRefs;return a.createElement(ge,{travelers:n,onSave:t,onChange:r,config:i,lobState:o,setInputsRefs:l})})),pe=t(70674),Ee=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=(0,o.inject)("context")((0,o.observer)((function(e){var n,t,r=e.hiddenInputType,i=e.flightSearch,o=e.hotwireFlightSearch,l=e.hotelSearch,c=e.hotwireHotelSearch,u=e.packageSearch,s=e.hotwirePackageSearch,d=e.cruiseSearch,m=e.thirdSearch,f=e.isApiCallEnabled,h=e.groundTransportSearch;switch(r){case pe.m.GROUND_TRANSPORT_SEARCH:return a.createElement(a.Fragment,null,a.createElement("input",{type:"hidden",name:"adults",value:h.numOfAdults,"data-testid":"adults-input"}),h.numOfChildren>0&&a.createElement("input",{type:"hidden",name:"children",value:h.numOfChildren,"data-testid":"children-input"}),h.numOfInfants>0&&a.createElement("input",{type:"hidden",name:"infants",value:h.numOfInfants,"data-testid":"infants-input"}));case pe.m.FLIGHT_SEARCH:return a.createElement("input",{type:"hidden",name:"passengers",value:i,"data-testid":"passengers-input"});case pe.m.HOTWIRE_FLIGHT_SEARCH:return a.createElement("input",{type:"hidden",name:"noOfTickets",value:o,"data-testid":"noOfTickets-input"});case pe.m.HOTEL_SEARCH:return a.createElement(a.Fragment,null,a.createElement("input",{type:"hidden",name:"rooms",value:l.rooms,"data-testid":"rooms-input"}),a.createElement("input",{type:"hidden",name:"adults",value:l.adults,"data-testid":"adults-input"}),l.children&&a.createElement("input",{type:"hidden",name:"children",value:l.children,"data-testid":"children-input"}));case pe.m.HOTWIRE_HOTEL_SEARCH:return a.createElement(a.Fragment,null,a.createElement("input",{type:"hidden",name:"rooms",value:c.rooms,"data-testid":"rooms-input"}),a.createElement("input",{type:"hidden",name:"adults",value:c.adults,"data-testid":"adults-input"}),c.children&&a.createElement("input",{type:"hidden",name:"children",value:c.children,"data-testid":"children-input"}));case pe.m.PACKAGE_SEARCH:var g=[];try{for(var v=Ee(Object.keys(u)),p=v.next();!p.done;p=v.next()){var E=p.value;g.push(a.createElement("input",{type:"hidden",name:E,key:E,value:u[E],"data-testid":"".concat(E,"-input")}))}}catch(R){n={error:R}}finally{try{p&&!p.done&&(t=v.return)&&t.call(v)}finally{if(n)throw n.error}}return a.createElement(a.Fragment,null,g);case pe.m.HOTWIRE_PACKAGE_SEARCH:return a.createElement(a.Fragment,null,Object.keys(s).map((function(e){return a.createElement("input",{type:"hidden",name:e,key:e,value:s[e],"data-testid":"".concat(e,"-input")})})));case pe.m.CRUISE_SEARCH:return a.createElement(a.Fragment,null,a.createElement("input",{type:"hidden",name:"adultCount",value:d.numOfAdults,"data-testid":"cruise-adults-input"}),d.numOfChildren>0&&a.createElement("input",{type:"hidden",name:"childCount",value:d.numOfChildren,"data-testid":"cruise-children-input"}),d.numOfChildren>0&&a.createElement("input",{type:"hidden",name:"childAges",value:d.childAges,"data-testid":"cruise-childAges-input"}));case pe.m.THIRD_SEARCH:var S=[];return S.push(a.createElement("input",{type:"hidden",name:f?"adultCount":"adult",value:m.numOfAdults,"data-testid":"third-adult-input",key:"third-adult-input"})),m.numOfChildren>0&&(f?(S.push(a.createElement("input",{type:"hidden",name:"numChildren",value:m.numOfChildren,"data-testid":"third-child-input",key:"third-child-input"})),(m.childAges||"").split(",").forEach((function(e,n){S.push(a.createElement("input",{type:"hidden",name:"childAge",value:e,"data-testid":"third-child-".concat(n,"-input"),key:"third-child-".concat(n,"-input")}))}))):S.push(a.createElement("input",{type:"hidden",name:"child",value:m.childAges,"data-testid":"third-child-ages-input",key:"third-child-ages-input"}))),a.createElement(a.Fragment,null,S);default:return a.createElement(a.Fragment,null)}}))),Re=t(23824),Te=t(14163),Ae=t(77135),Oe=t(8365),ke=t(7510),be=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,r,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return o},Ce=(0,o.inject)("analytics")((0,o.observer)((function(e){var n=e.analytics,t=e.config,o=e.handleMenuTriggerState,c=e.isApiCallEnabled,u=e.isChanged,s=e.lobState,d=e.menuAlign,m=e.metadata,f=e.noRehydratationValues,v=e.onSave,p=e.setChange,E=e.travelers,S=e.triggerType,T=void 0===S?Re.Q.FAKE_INPUT:S,O=e.tripLobType,k=a.useRef(null),b=a.useRef(null),C=be(a.useState(!1),2),I=C[0],w=C[1],y=be((0,r.useDialog)("travelers-dialog-".concat(s.config.elementId)),3),x=y[0],P=y[1],H=y[2],_=m.numOfAdults,L=m.numOfChildren,N=m.numOfInfants,z=m.flightSearch,F=m.hotwireFlightSearch,j=m.hotelSearch,G=m.hotwireHotelSearch,U=m.packageSearch,D=m.hotwirePackageSearch,K=m.cruiseSearch,B=m.groundTransportSearch,W=m.thirdSearch,J=t.withFlight,M=t.withRooms,V=t.withInfants,Y=(null==f?void 0:f.numOfTravelers)&&!_?null==f?void 0:f.numOfTravelers:_+L+(V?N:0),Q=be(a.useState(!1),2),X=Q[0],Z=Q[1],q=be(a.useState(null==f?void 0:f.name),2),$=q[0],ee=q[1],te=be(a.useState(!1),2),ae=te[0],re=te[1],ie=be(a.useState("guests-hidden"),2),le=ie[0],ce=ie[1],ue=(0,oe.c)(t,E.rooms,Y),se=(0,R.useLocalization)().formatText,fe=t.roomsGuestsToken,he=t.travelersToken,ge=E.rooms.length,pe=t.withRooms?se(fe,ge,Y):se(he,Y),Ee=!(s instanceof me.Zb)||s.validateHotelPackage();a.useEffect((function(){var e;I&&b.current&&(null===(e=b.current)||void 0===e||e.focus(),w(!1),b.current=null),Ee||X||(P.openDialog(),Z(!0),w(!0))}));a.useEffect((function(){ee(void 0),ce(""),re(!0),u||function(){var e,n,a=s instanceof me.mU?1:2,r={rooms:[{adults:M&&J||O&&M||!M&&!J?2:a,children:[],infants:[]}],infantSeating:Te.J.ON_LAP};t.withRooms?null===(e=s.updateHotelTravelersSelection)||void 0===e||e.call(s,r):null===(n=s.updateNonHotelTravelersSelection)||void 0===n||n.call(s,r)}(),o&&X&&o(!1)}),[X]);var Ce=function(e){e.preventDefault(),P.openDialog(),He.trackEvent(_e+ne.sF),Z(!X),(0,i.liveAnnounce)(se(A),i.Level.POLITE)},Ie=function(){return!s.validateTravelersField||s.validateTravelersField()},we=function(){return Z((function(e){return!Ie()&&e||!e}))},ye=function(e){we(),e.preventDefault(),He.trackEvent(_e+ne.sF),(0,i.liveAnnounce)(se(A),i.Level.POLITE)},xe=function(){return a.createElement(de.l_,null,a.createElement(de.Vk,null,a.createElement(l.g,{icon:t.icon,className:le,label:se(t.labelToken),"aria-label":pe,value:ue,name:$,"data-testid":"travelers-field-trigger",onClick:Ce,domRef:k})),a.createElement(de.N0,null,a.createElement(l.g,{icon:t.icon,className:le,label:se(t.labelToken),"aria-label":pe,onClick:ye,value:ue,name:$,"data-testid":"travelers-field-trigger",domRef:k})))},Pe=function(){return a.createElement(h.E,{noWrap:!0},a.createElement("button",{type:"button","data-testid":"travelers-field",ref:k,"aria-label":pe},ue,a.createElement(g.a,{name:"expand_more"})))},He=(0,ne.uY)(s.trackingEnabled,n,s.moduleName),_e="guests.",Le=s.config.elementId||"",Ne=Le.includes("flight")||Le.includes("hotel"),ze=null!=d?d:Ne?Ae.P.RIGHT:Ae.P.LEFT;return a.createElement(a.Fragment,null,a.createElement(ke.X,{showAdaptive:X,dialogWrapper:function(e){return a.createElement(Oe.h,{isVisible:x},a.createElement(H,null,e))},handleDialogClick:Ce,handleMenuClick:ye,adaptiveTrigger:function(){return T===Re.Q.LINK_BUTTON?Pe():xe()},menuPosition:ze,toolbar:{toolbarTitle:se(t.dialogTitleToken),navigationContent:{navIconLabel:se(t.dialogCancelLabelToken),onClick:function(){Ie()&&(k.current&&k.current.focus(),P.closeDialog(),He.trackEvent(_e+ne.t9)),we()}}}},a.createElement(ve,{travelers:E,config:t,onSave:function(e){Ie()&&(k.current&&k.current.focus(),v&&(p&&!u&&p(),v("SUBMIT",e)),x&&P.closeDialog(),He.trackEvent(_e+ne.T_)),we()},onChange:function(e){return v("CHANGE",e)},lobState:s,setInputsRefs:function(e){b.current=e.current}})),ae&&a.createElement(Se,{hiddenInputType:t.hiddenInputType,flightSearch:z,hotwireFlightSearch:F,hotelSearch:j,hotwireHotelSearch:G,groundTransportSearch:B,packageSearch:U,hotwirePackageSearch:D,cruiseSearch:K,thirdSearch:W,isApiCallEnabled:c}))})))},14163:function(e,n,t){t.d(n,{J:function(){return r.J},m:function(){return a.m}});var a=t(70674),r=t(92413)},23824:function(e,n,t){var a;t.d(n,{Q:function(){return a}}),function(e){e.FAKE_INPUT="fake input",e.LINK_BUTTON="link button"}(a||(a={}))},89105:function(e,n,t){t.d(n,{Y:function(){return o},c:function(){return l}});var a=t(92413),r=t(29892),i=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},o=function(e){var n,t,r,o,l,c,u=[],s=[],d=e.rooms.reduce((function(n,t,r){var o,l,c,d;n.numOfAdults+=t.adults,n.numOfChildren+=t.children.length,n.numOfInfants+=t.infants.length;var m=[],f=0;try{for(var h=i(t.children),g=h.next();!g.done;g=h.next()){var v=g.value;m.push(v.age),s.push("".concat(r+1,"_").concat(v.age)),f+=v.age>=12?1:0,n.packageSearch["childAges[".concat(r+1,"][").concat(m.length,"]")]=v.age,n.hotwirePackageSearch["childrenAgePerRoom".concat(r).concat(m.length-1)]=v.age}}catch(R){o={error:R}}finally{try{g&&!g.done&&(l=h.return)&&l.call(h)}finally{if(o)throw o.error}}n.travelersAgeTwelveOrOlder+=t.adults+f;try{for(var p=i(t.infants),E=p.next();!E.done;E=p.next()){var S=E.value;m.push(S.age),s.push("".concat(r+1,"_").concat(S.age)),n.packageSearch["childAges[".concat(r+1,"][").concat(m.length,"]")]=S.age,n.hotwirePackageSearch["childrenAgePerRoom".concat(r).concat(m.length-1)]=S.age}}catch(T){c={error:T}}finally{try{E&&!E.done&&(d=p.return)&&d.call(p)}finally{if(c)throw c.error}}return u.push(t.adults),n.packageSearch["adultsPerRoom[".concat(r+1,"]")]=t.adults,n.packageSearch["childrenPerRoom[".concat(r+1,"]")]=t.children.length+t.infants.length,n.flightSearch=function(e,n,t){var r=e.numOfAdults,i=e.numOfChildren,o=e.numOfInfants,l="";return l="children:".concat(i+o),l+=n.length?"[".concat(n.join(";"),"]"):"",l+=",adults:".concat(r),l+=",seniors:0",l+",infantinlap:".concat(t===a.J.ON_LAP?"Y":"N")}(n,m,e.infantSeating),n.hotwireFlightSearch=function(e){return e.numOfAdults+e.numOfChildren}(n),n.hotwirePackageSearch["numAdultsPerRoom".concat(r)]=t.adults,n.hotwirePackageSearch["numChildrenPerRoom".concat(r)]=t.children.length+t.infants.length,n.cruiseSearch=function(e,n){var t=e.numOfAdults,a=e.numOfChildren,r=e.cruiseSearch;return r.numOfAdults=t,r.numOfChildren=a,n.length&&(r.childAges=n.join(",")),r}(n,m),n.thirdSearch=function(e,n){var t=e.numOfAdults,a=e.numOfChildren,r=e.thirdSearch;return r.numOfAdults=t,r.numOfChildren=a,n.length&&(r.childAges=n.join(",")),r}(n,m),n.groundTransportSearch=function(e){var n=e.numOfAdults,t=e.numOfChildren,a=e.numOfInfants,r=e.groundTransportSearch;return r.numOfAdults=n,r.numOfChildren=t,r.numOfInfants=a,r}(n),n}),{numOfAdults:0,numOfChildren:0,numOfInfants:0,numOfRooms:0,travelersAgeTwelveOrOlder:0,flightSearch:"",hotwireFlightSearch:0,hotelSearch:{rooms:"0",adults:"0"},hotwireHotelSearch:{rooms:"0",adults:"0"},packageSearch:{numberOfRooms:"0",infantsInSeats:"0"},hotwirePackageSearch:{numberOfRooms:"0",infantsInSeats:"0"},cruiseSearch:{numOfAdults:1,numOfChildren:0},thirdSearch:{numOfAdults:1,numOfChildren:0},groundTransportSearch:{numOfAdults:1,numOfChildren:0,numOfInfants:0}});return d.numOfRooms=e.rooms.length,d.hotelSearch=function(e,n,t){var a=t.numOfRooms,r=t.hotelSearch;return r.rooms=a.toString(),r.adults=e.join(","),n.length&&(r.children=n.join(",")),r}(u,s,d),d.hotwireHotelSearch=(t=(n=d).numOfAdults,r=n.numOfChildren,o=n.numOfInfants,l=n.numOfRooms,(c=n.hotwireHotelSearch).rooms=l.toString(),c.adults=t.toString(),c.children=(r+o).toString(),c),d.packageSearch.numberOfRooms=d.numOfRooms.toString(),d.hotwirePackageSearch.noOfRooms=d.numOfRooms.toString(),d.packageSearch.infantsInSeats=e.infantSeating===a.J.IN_SEAT?"1":"0",d},l=function(e,n,t){var a=(0,r.useLocalization)().formatText,i=e.withRooms,o=e.roomsGuestsToken,l=e.travelersToken;return i?a(o,n.length,t):a(l,t)}}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/blossom-flex-ui/shared~TravelersField.310b2f59d277aebc4af2.js.map